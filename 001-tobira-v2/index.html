<!DOCTYPE html>
<!--
Project: 避暑地への扉 — ノベルゲー風プロトタイプ
Author: <Cody@IT-journey>
Year: 2025
Demo: https://<YOUR-USERNAME>.github.io/<REPO-NAME>/
License: MIT（see LICENSE）

Third-party (via jsDelivr CDN, version pinned):
  - three.js r146 (MIT) © 2010–2025 three.js authors
    https://cdn.jsdelivr.net/npm/three@0.146.0/build/three.min.js
    https://cdn.jsdelivr.net/npm/three@0.146.0/examples/js/controls/OrbitControls.js
    https://cdn.jsdelivr.net/npm/three@0.146.0/examples/js/loaders/GLTFLoader.js

Assets:
  - Background images: Generated by AI by the author（詳細は ASSETS.md に記載）

Notes:
  - 展示・オフライン・CDNブロック環境では上記ファイルを vendor/ に同梱し、
    <script src="..."> の参照先をローカルに切り替えてください。
-->
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>避暑地への扉</title>
<!-- OGP / Twitter Card : ここから追記 -->
<!-- OGP / Twitter Card (v2, PNG版) -->
<meta property="og:title" content="避暑地への扉 — ノベルゲー風プロトタイプ">
<meta property="og:description" content="生成AI×単一HTMLで小説をノベルゲーム風に動かした最短プロトタイプ。">
<meta property="og:type" content="website">
<meta property="og:url" content="https://tools001.github.io/note/001-tobira-v2/">
<meta property="og:image" content="https://tools001.github.io/note/001-tobira-v2/ogp.jpg">
<meta property="og:image:secure_url" content="https://tools001.github.io/note/001-tobira-v2/ogp.jpg">
<meta property="og:image:type" content="image/jpeg">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:locale" content="ja_JP">
<meta property="og:site_name" content="tools001.github.io">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="避暑地への扉 — ノベルゲー風プロトタイプ">
<meta name="twitter:description" content="生成AI×単一HTMLで小説をノベルゲーム風に動かした最短プロトタイプ。">
<meta name="twitter:image" content="https://tools001.github.io/note/001-tobira-v2/ogp.jpg">
<link rel="canonical" href="https://tools001.github.io/note/001-tobira-v2/">
<!-- OGP / Twitter Card : ここまで -->
<style>
  :root{ --bg:#07070a; --fg:#eaeef7; }
  html,body{
    margin:0;height:100%;
    background:var(--bg);color:var(--fg);
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,"Hiragino Kaku Gothic ProN","Yu Gothic",Meiryo,sans-serif;
    overflow:hidden;
    overscroll-behavior:none;
    touch-action:none;                 /* 自前ジェスチャ */
    -webkit-user-select:none; user-select:none;
    -webkit-tap-highlight-color:transparent;
  }
  canvas{ display:block; touch-action:none; -webkit-tap-highlight-color:transparent; }

  /* レイヤー：canvas(0) < tapAll(1) < HUD(3) */
  .hud{position:fixed;inset:0;pointer-events:none; z-index:3;}
  #tapAll{position:fixed;inset:0; z-index:1; pointer-events:auto;} /* 全画面タップ用 */

  .top{position:absolute;left:12px;top:10px;right:12px;display:flex;gap:8px;align-items:center;opacity:.9}
  .chip{pointer-events:auto;border:1px solid #333;padding:6px 10px;border-radius:999px;font-size:12px;background:#1116}
  .log{margin-left:auto;font-size:12px;opacity:.75}

  /* 右上類を非表示 */
  #sceneChip{ display:none; }
  #fps{ display:none; }
  #log{ display:none; }

  .panel{
    position:absolute;left:0;right:0;bottom:0;
    padding:18px 16px 24px;
    background:linear-gradient(180deg,#0000,#0006 40%,#0009);
    pointer-events:auto;
    z-index:3;
  }
  .textbox{
    max-width:min(980px,92vw);
    margin:0 auto;
    padding:14px 18px;
    border:1px solid #1b1f28;border-radius:14px;
    background:rgba(11,13,18,.35);          /* 半透明 */
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    box-shadow:0 8px 24px rgba(0,0,0,.25);
    font-size:16px;line-height:1.9;

    display:grid;
    grid-template-rows: 1.4em auto auto;
    row-gap:10px;
    align-items:start;
    -webkit-user-select:none; user-select:none;
  }
  .speaker{ opacity:.85;font-size:13px;line-height:1.4em; min-height:1.4em; }
  #text{ margin:0; white-space:pre-wrap; word-break:break-word; }

  .controls{display:flex;gap:14px;justify-content:flex-end}
  .btn{
    pointer-events:auto;border:1px solid #2a2a2a;background:#101318;
    padding:16px 24px;border-radius:14px;color:var(--fg);
    font-weight:600;letter-spacing:.02em;cursor:pointer;transition:.18s;
    font-size:18px;min-height:48px;
    -webkit-user-select:none; user-select:none;
    touch-action:none;
  }
  .btn:hover{transform:translateY(-1px);box-shadow:0 6px 16px #0006}

  .vignette{position:fixed;inset:-3px;background:radial-gradient(ellipse at center,#0000 45%,#0004 70%,#0009 100%);pointer-events:none; z-index:2;}
  @media (max-width:600px){
    .textbox{font-size:15px; grid-template-rows: 1.4em auto auto;}
  }
</style>
</head>
<body>
<div id="tapAll" aria-hidden="true"></div>

<div class="hud">
  <div class="top">
    <div class="chip" id="sceneChip">Scene: --</div>
    <div class="chip" id="fps">FPS: --</div>
    <div class="log" id="log">読み込み中…</div>
  </div>
  <div class="panel">
    <div class="textbox">
      <div class="speaker" id="speaker"></div>
      <div id="text"></div>
      <div class="controls">
        <button class="btn" id="prevBtn">◀ 戻る</button>
        <button class="btn" id="nextBtn">次へ ▶</button>
      </div>
    </div>
  </div>
  <div class="vignette"></div>
</div>

<!-- Three.js r146（グローバル） -->
<script src="https://cdn.jsdelivr.net/npm/three@0.146.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.146.0/examples/js/controls/OrbitControls.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.146.0/examples/js/loaders/GLTFLoader.js"></script>

<script>
const _0x24b718=_0x2993;(function(_0x17550c,_0x50ac99){const _0x2c2a13=_0x2993,_0x38df0d=_0x17550c();while(!![]){try{const _0x1e5c79=parseInt(_0x2c2a13(0x121))/0x1+-parseInt(_0x2c2a13(0xde))/0x2+-parseInt(_0x2c2a13(0xfd))/0x3+parseInt(_0x2c2a13(0x126))/0x4+parseInt(_0x2c2a13(0xc6))/0x5+parseInt(_0x2c2a13(0x9f))/0x6+-parseInt(_0x2c2a13(0xc0))/0x7;if(_0x1e5c79===_0x50ac99)break;else _0x38df0d['push'](_0x38df0d['shift']());}catch(_0x18d6fb){_0x38df0d['push'](_0x38df0d['shift']());}}}(_0x31c8,0x6fb77));const ASSETS={'doorModel':null,'benchModel':null},renderer=new THREE[(_0x24b718(0x110))]({'antialias':!![],'powerPreference':'high-performance'});renderer[_0x24b718(0xc3)](Math[_0x24b718(0x11f)](devicePixelRatio,0x2)),renderer[_0x24b718(0xce)](window[_0x24b718(0xc4)],window[_0x24b718(0x8f)]),renderer['outputEncoding']=THREE['sRGBEncoding'],renderer[_0x24b718(0xe1)]=0x1,document[_0x24b718(0x10f)]['appendChild'](renderer['domElement']);const scene=new THREE[(_0x24b718(0x100))]();scene[_0x24b718(0x10a)]=new THREE[(_0x24b718(0xd7))](0x6070a),scene['fog']=new THREE['FogExp2'](0x6070a,0.02);const camera=new THREE[(_0x24b718(0xa5))](0x37,window[_0x24b718(0xc4)]/window[_0x24b718(0x8f)],0.1,0xc8);camera['position'][_0x24b718(0x92)](0x0,1.6,0x6);const controls=new THREE['OrbitControls'](camera,renderer[_0x24b718(0xa4)]);controls[_0x24b718(0x105)]=!![],controls[_0x24b718(0xa2)]=![],controls['minDistance']=1.2,controls['maxDistance']=0xc;const clock=new THREE[(_0x24b718(0x109))](),hemi=new THREE[(_0x24b718(0x9c))](0x7ea6ff,0x101018,0.6);scene[_0x24b718(0x118)](hemi);const key=new THREE[(_0x24b718(0xd8))](0xffffff,0x1);key['position'][_0x24b718(0x92)](0x4,0x6,0x3),scene[_0x24b718(0x118)](key);const groundMat=new THREE['MeshStandardMaterial']({'color':0x111317,'roughness':0.98}),ground=new THREE['Mesh'](new THREE[(_0x24b718(0x122))](0x64,0x64),groundMat);ground[_0x24b718(0xba)]['x']=-Math['PI']/0x2,ground['receiveShadow']=!![],scene[_0x24b718(0x118)](ground);const texLoader=new THREE[(_0x24b718(0x125))](),streetBgTex=texLoader[_0x24b718(0x12c)](_0x24b718(0x129),_0x519009=>{const _0x43085a=_0x24b718;_0x519009[_0x43085a(0xf8)]=THREE[_0x43085a(0x98)],_0x519009[_0x43085a(0x7d)]=THREE[_0x43085a(0x8c)];}),highlandBgTex=texLoader['load']('hisyochi.jpg',_0x178626=>{const _0x3e0e4e=_0x24b718;_0x178626[_0x3e0e4e(0xf8)]=THREE[_0x3e0e4e(0x98)],_0x178626['minFilter']=THREE['LinearFilter'];}),nightBgTex=texLoader[_0x24b718(0x12c)](_0x24b718(0xe5),_0x35cb5f=>{const _0x2ced89=_0x24b718;_0x35cb5f[_0x2ced89(0xf8)]=THREE[_0x2ced89(0x98)],_0x35cb5f[_0x2ced89(0x7d)]=THREE[_0x2ced89(0x8c)];}),descentBgTex=texLoader[_0x24b718(0x12c)](_0x24b718(0xcb),_0x58da80=>{const _0x4df072=_0x24b718;_0x58da80[_0x4df072(0xf8)]=THREE[_0x4df072(0x98)],_0x58da80[_0x4df072(0x7d)]=THREE['LinearFilter'];}),motes=makeMotes(0x104);scene[_0x24b718(0x118)](motes);const circleTex=makeCircleTexture(0x40),snow=makeSnow(0x578,circleTex);snow[_0x24b718(0x107)]=![],scene['add'](snow);const loader=new THREE[(_0x24b718(0xf1))]();function _0x31c8(){const _0x1c3e0a=['prevBtn','LinearFilter','scrollTo','避暑地は次第におかしくなっていく。冷気は鋭く肺を突き、風は骨の芯まで凍みる。陽は沈まず、薄暗さだけが永遠に続く。','innerHeight','掲示板には古びた紙が何枚も貼られていた。','sqrt','set','「会社員・斎藤真司（32）、河川敷で意識失い死亡」','tapAll','size','abs','――一年が経った。扉が再び開く。','sRGBEncoding','turb','sin','―\x20戻る道はひとつ。次の夏、扉が開いたとき、現世の者を一人送り込むこと。\x20―\x20入れ替わりは“縁ある者”に限る。','HemisphereLight','orientationchange','resize','5129070YCVXmD','Group','stopPropagation','enablePan','HOT','domElement','PerspectiveCamera','includes','intensity','active','dur','PointsMaterial','textContent','geometry','MathUtils','fps','DOOR','emissive','array','――ひんやりとした風。冷たい扉が、場違いにそこへ据えられていた。','count','FPS:\x20','opening','userData','emissiveIntensity','arc','attributes','rotation','vel','悪いと分かっていても、罪悪感は次第に薄れていく。\u3000――戻りたい。美奈の真意を確かめたい。誰かを、代わりに。','地獄の寒気：写真（hisyochi2.jpg）＋吹雪','ArrowLeft','lerpVectors','6591879vTnLOX','getElementById','fog','setPixelRatio','innerWidth','exposureBase','4350035wQySnW','now','updateProjectionMatrix','BufferAttribute','僕の名前は佐藤悠人（さとう・ゆうと）。十五歳の夏、あの日の暑さを、僕は一生忘れられない。','hisyochi2.jpg','clone','けれど彼女は昨夏、熱中症で突然亡くなった。','setSize','hemiBase','clientY','createElement','log','COLD','Mesh','STREET','Scene:\x20','Color','DirectionalLight','Vector3','hemiPeak','DESCENT','setAttribute','END','551832GOIeAB','灼熱の街：写真のみ（地面/モヤなし）','ArrowRight','toneMappingExposure','canvas','material','sceneChip','hisyochi1.jpg','some','美奈の声','高原（夜）：写真背景\x20hisyochi1.jpg','max','「主婦・長谷川絹子（42）、帰宅途中に路上で倒れ死亡」','BoxGeometry','一年後：扉は再び開く（写真なし）','getContext','position','addColorStop','clientX','GLTFLoader','rgba(255,255,255,1)','「中学生・佐々木美奈（14）、自宅で死亡。エアコン故障か」','aspect','HIGHLAND','MeshStandardMaterial','rgba(255,255,255,0.85)','encoding','all','speaker','exposurePeak','そこは灼熱の街ではなかった。眼前には高原の避暑地が広がっていた。','625170EfTLkX','次の瞬間、ドンッ！\x20背中を強く押され、僕は中へ吸い込まれた。','color','Scene','addEventListener','scene','心地よさは偽りで、この場所は地獄だった。耐え難い寒さと暗闇に、心は削られていく。','その温もりは、かつて僕が守りたかった誰かのものと同じだった。けれど次の夏には、もう別の誰かのものになっているのだろう。','enableDamping','time','visible','頭の隙間で、美奈が囁く。「どちらも選べなかったの」','Clock','background','preventDefault','doorModel','扉が再び開く','cos','body','WebGLRenderer','getDelta','windX','「わかった。じゃあ本屋の前で集合な」','density','Points','update','text','add','ONEYEAR','opened','createRadialGradient','groundColor','keydown','冷たい扉が現れる','min','enabled','78989rwosQs','PlaneGeometry','needsUpdate','夏休みの最終日、親友の中村亮（なかむら・りょう）と一緒に、部活帰りに本屋へ寄る予定だった。','TextureLoader','319012wTrQFm','木陰の下には涼やかな風、澄んだ小川がきらめき、岩にあたる水音が心地よい旋律のように響く。','benchModel','machi.jpg','target','扉の周りには涼を求める人が集まっていた。皆、吸い寄せられるように近づき、開くのを待っている。','load','去年までは、もう一人そこにいた。僕と亮がそろって好意を寄せていた女子――佐々木美奈（ささき・みな）。','僕はゆっくりと手を伸ばす。掌に触れる、確かな温もり。','random','classList','ギィィ','indexOf','toFixed','fillStyle','minFilter','NIGHT','length','key','ふと横の路地に白い靄がゆらめく。そこだけ空気が冷えているように見えた。','〈避暑地案内〉\x20―\x20扉は真夏の極暑の日にだけ開く。訪れた者は涼を得られる。ただし長居は禁物……','cancelable','――END――','rgba(255,255,255,0)','params','CanvasTexture','pointerup','pow','足元の小川は鏡のように静まり、まるで“境界”のようだ。'];_0x31c8=function(){return _0x1c3e0a;};return _0x31c8();}let doorObj,doorPivot,benchObj;(async function ensureModels(){const _0x2c06cd=_0x24b718;ASSETS['doorModel']?doorObj=(await loadGLB(ASSETS[_0x2c06cd(0x10c)]))[_0x2c06cd(0x102)]:doorObj=new THREE[(_0x2c06cd(0xd4))](new THREE[(_0x2c06cd(0xeb))](0x1,0x2,0.08),new THREE[(_0x2c06cd(0xf6))]({'color':0xcad5ff,'metalness':0.1,'roughness':0.2,'emissive':0x112244})),doorPivot=new THREE[(_0x2c06cd(0xa0))](),doorPivot[_0x2c06cd(0xee)][_0x2c06cd(0x92)](-0.45,0x1,-0x2),doorObj[_0x2c06cd(0xee)][_0x2c06cd(0x92)](0.5,0x0,0x0),doorPivot[_0x2c06cd(0x118)](doorObj),doorPivot[_0x2c06cd(0x107)]=![],scene['add'](doorPivot),ASSETS[_0x2c06cd(0x128)]?benchObj=(await loadGLB(ASSETS[_0x2c06cd(0x128)]))[_0x2c06cd(0x102)]:benchObj=makeBench(),benchObj['visible']=![],scene['add'](benchObj);}());function loadGLB(_0x33edc8){const _0x124265=_0x24b718;return new Promise((_0x1aad8d,_0x3b2fca)=>loader[_0x124265(0x12c)](_0x33edc8,_0x1aad8d,undefined,_0x3b2fca));}function makeMotes(_0x34adc0=0xc8){const _0x1a37e0=_0x24b718,_0x328f31=new THREE['BufferGeometry'](),_0x60e824=new Float32Array(_0x34adc0*0x3);for(let _0x512935=0x0;_0x512935<_0x34adc0;_0x512935++){const _0x283375=Math[_0x1a37e0(0x12f)]()*0x10+0x2,_0x5e3202=Math[_0x1a37e0(0x12f)]()*Math['PI']*0x2;_0x60e824[_0x512935*0x3+0x0]=Math['cos'](_0x5e3202)*_0x283375,_0x60e824[_0x512935*0x3+0x1]=Math[_0x1a37e0(0x12f)]()*2.4+0.2,_0x60e824[_0x512935*0x3+0x2]=Math[_0x1a37e0(0x9a)](_0x5e3202)*_0x283375;}return _0x328f31[_0x1a37e0(0xdc)](_0x1a37e0(0xee),new THREE[(_0x1a37e0(0xc9))](_0x60e824,0x3)),new THREE[(_0x1a37e0(0x115))](_0x328f31,new THREE[(_0x1a37e0(0xaa))]({'size':0.04,'transparent':!![],'opacity':0.6,'depthWrite':![]}));}function makeCircleTexture(_0x8fee7e=0x40){const _0x3c645c=_0x24b718,_0x26cbcc=document[_0x3c645c(0xd1)](_0x3c645c(0xe2));_0x26cbcc['width']=_0x26cbcc['height']=_0x8fee7e;const _0x4d7d8d=_0x26cbcc[_0x3c645c(0xed)]('2d'),_0x55cc77=_0x8fee7e*0.45,_0x45d646=_0x8fee7e/0x2,_0x1dbc1b=_0x8fee7e/0x2,_0x1ce408=_0x4d7d8d[_0x3c645c(0x11b)](_0x45d646,_0x1dbc1b,_0x55cc77*0.2,_0x45d646,_0x1dbc1b,_0x55cc77);_0x1ce408[_0x3c645c(0xef)](0x0,_0x3c645c(0xf2)),_0x1ce408[_0x3c645c(0xef)](0.6,_0x3c645c(0xf7)),_0x1ce408[_0x3c645c(0xef)](0x1,_0x3c645c(0x85)),_0x4d7d8d['clearRect'](0x0,0x0,_0x8fee7e,_0x8fee7e),_0x4d7d8d[_0x3c645c(0x7c)]=_0x1ce408,_0x4d7d8d['beginPath'](),_0x4d7d8d[_0x3c645c(0xb8)](_0x45d646,_0x1dbc1b,_0x55cc77,0x0,Math['PI']*0x2),_0x4d7d8d['fill']();const _0x140850=new THREE[(_0x3c645c(0x87))](_0x26cbcc);return _0x140850[_0x3c645c(0x7d)]=THREE[_0x3c645c(0x8c)],_0x140850;}function makeSnow(_0x32d6e2=0x4b0,_0x2b7e54){const _0x2fb408=_0x24b718,_0x504800=new THREE['BufferGeometry'](),_0x132073=new Float32Array(_0x32d6e2*0x3),_0x462a04=new Float32Array(_0x32d6e2*0x3),_0x22bc53=0x16;for(let _0x3b2ec4=0x0;_0x3b2ec4<_0x32d6e2;_0x3b2ec4++){const _0x4d384f=Math[_0x2fb408(0x12f)]()*Math['PI']*0x2,_0x214a9a=Math[_0x2fb408(0x91)](Math['random']())*_0x22bc53;_0x132073[_0x3b2ec4*0x3+0x0]=Math['cos'](_0x4d384f)*_0x214a9a,_0x132073[_0x3b2ec4*0x3+0x2]=Math['sin'](_0x4d384f)*_0x214a9a,_0x132073[_0x3b2ec4*0x3+0x1]=Math[_0x2fb408(0x12f)]()*0x8+0x2,_0x462a04[_0x3b2ec4*0x3+0x0]=Math[_0x2fb408(0x12f)]()*0.2-0.1,_0x462a04[_0x3b2ec4*0x3+0x1]=-(Math[_0x2fb408(0x12f)]()*0.6+0.4),_0x462a04[_0x3b2ec4*0x3+0x2]=Math[_0x2fb408(0x12f)]()*0.2-0.1;}_0x504800['setAttribute'](_0x2fb408(0xee),new THREE[(_0x2fb408(0xc9))](_0x132073,0x3)),_0x504800[_0x2fb408(0xb6)][_0x2fb408(0xbb)]=_0x462a04;const _0x3b522f=new THREE[(_0x2fb408(0xaa))]({'size':0.08,'map':_0x2b7e54,'transparent':!![],'alphaTest':0.08,'opacity':0.95,'depthWrite':![]}),_0x20a569=new THREE['Points'](_0x504800,_0x3b522f);return _0x20a569[_0x2fb408(0xb6)]['params']={'windX':0.4,'fall':0.8,'turb':0.8},_0x20a569;}function makeBench(){const _0x5433ef=_0x24b718,_0x434e0a=new THREE[(_0x5433ef(0xa0))](),_0x409f97=new THREE[(_0x5433ef(0xf6))]({'color':0x6c553a,'roughness':0.8}),_0x919bbf=new THREE['MeshStandardMaterial']({'color':0x555,'metalness':0.7,'roughness':0.4});for(let _0x45f74f=0x0;_0x45f74f<0x4;_0x45f74f++){const _0x8a58b5=new THREE[(_0x5433ef(0xd4))](new THREE[(_0x5433ef(0xeb))](1.4,0.08,0.22),_0x409f97);_0x8a58b5[_0x5433ef(0xee)]['set'](0x0,0.5+_0x45f74f*0.09,-0.2),_0x434e0a[_0x5433ef(0x118)](_0x8a58b5);}const _0x5e54cf=new THREE['CylinderGeometry'](0.03,0.03,0.6,0xc),_0x291864=new THREE['Mesh'](_0x5e54cf,_0x919bbf);_0x291864[_0x5433ef(0xee)]['set'](-0.55,0.3,-0.3);const _0x797e0a=_0x291864['clone']();return _0x797e0a[_0x5433ef(0xee)]['x']=0.55,_0x434e0a['add'](_0x291864,_0x797e0a),_0x434e0a[_0x5433ef(0xee)]['set'](-1.4,0x0,-1.5),_0x434e0a;}const SCENES={'STREET':'STREET','DOOR':_0x24b718(0xaf),'HIGHLAND':'HIGHLAND','NIGHT':_0x24b718(0x7e),'DESCENT':_0x24b718(0xdb),'ONEYEAR':_0x24b718(0x119),'END':'END'},NARRATIVE={[SCENES[_0x24b718(0xd5)]]:[{'t':_0x24b718(0xca),'s':'悠人'},{'t':_0x24b718(0x124)},{'t':_0x24b718(0x12d)},{'t':_0x24b718(0xcd)},{'t':'取り合いの末に失ってしまった存在。僕と亮はまた友人として並ぶようになったが、気まずさは残った。'},{'t':'その日は異常だった。アスファルトは歪み、街路樹の影すら役に立たない。気温は40度を超え、蝉の声さえ狂気じみて聞こえた。'},{'t':'「悠人、先にコンビニ寄って飲み物買ってくるわ。喉が死にそう」','s':'亮'},{'t':_0x24b718(0x113),'s':'悠人'}],[SCENES['DOOR']]:[{'t':_0x24b718(0x81)},{'t':_0x24b718(0xb2)},{'t':_0x24b718(0x12b)},{'t':'僕も一歩踏み出しかけて、ふと足が止まる。ギィィ……と音を立て、扉がひとりでに開いた。'},{'t':_0x24b718(0xfe)},{'t':'最後に感じたのは――背中に触れた手の、異様な冷たさだった。'}],[SCENES[_0x24b718(0xf5)]]:[{'t':_0x24b718(0xfc)},{'t':_0x24b718(0x127)},{'t':'「涼しい……！」思わず声をあげ、疑念も恐怖も忘れて駆け回る。','s':'悠人'}],[SCENES[_0x24b718(0x7e)]]:[{'t':'やがて夕暮れ。時計では数分しか経っていないのに、空は茜色に染まっていた。時間の感覚が狂っている。'},{'t':'茜の名残が薄れる散策路の端、ささくれた木枠の掲示板がこちらを向いていた。'},{'t':_0x24b718(0x82)},{'t':_0x24b718(0x9b)},{'t':_0x24b718(0x90)},{'t':'〈冥府新報・過去記事抜粋〉「高校生・川村明彦（17）、部活動中に倒れ死亡」'},{'t':_0x24b718(0xea)},{'t':_0x24b718(0x93)},{'t':_0x24b718(0xf3)},{'t':'記事には続きがあった。「修理依頼は出されておらず、窓も開けられていなかったという」……それはもう、事故ではなかった。'},{'t':_0x24b718(0x8a)}],[SCENES[_0x24b718(0xdb)]]:[{'t':_0x24b718(0x8e)},{'t':_0x24b718(0x103)},{'t':_0x24b718(0xbc)},{'t':_0x24b718(0x108),'s':_0x24b718(0xe7)},{'t':'親の顔。妹の笑顔。亮との日々。誰か一人を思い浮かべるたび、心臓を握りつぶされるような苦しみが走る。'},{'t':'いっそ、自分がここで凍りつけばいいのかもしれない。だが、冷気はいずれ正気を奪ってしまう。'}],[SCENES[_0x24b718(0x119)]]:[{'t':_0x24b718(0x97)},{'t':'そこには、汗だくで路地に迷い込んだ懐かしい姿があった。'},{'t':_0x24b718(0x12e)},{'t':_0x24b718(0x104)}],[SCENES[_0x24b718(0xdd)]]:[{'t':_0x24b718(0x84)}]},$=_0x1ca923=>document[_0x24b718(0xc1)](_0x1ca923),speakerEl=$(_0x24b718(0xfa)),textEl=$(_0x24b718(0x117)),nextBtn=$('nextBtn'),prevBtn=$(_0x24b718(0x8b)),fpsEl=$(_0x24b718(0xae)),logEl=$(_0x24b718(0xd2)),sceneChip=$(_0x24b718(0xe4)),tapAll=$(_0x24b718(0x94)),panelEl=document['querySelector']('.panel');let order=[SCENES[_0x24b718(0xd5)],SCENES['DOOR'],SCENES[_0x24b718(0xf5)],SCENES['NIGHT'],SCENES[_0x24b718(0xdb)],SCENES[_0x24b718(0x119)],SCENES[_0x24b718(0xdd)]],curScene=order[0x0],lineIdx=0x0,lastScene=null;function setSceneLabel(){const _0x41e8dc=_0x24b718;sceneChip[_0x41e8dc(0xab)]=_0x41e8dc(0xd6)+curScene;}function setLog(_0x469fba){const _0x45b3b1=_0x24b718;logEl[_0x45b3b1(0xab)]=_0x469fba;}function setLine(_0x51eb56){const _0x3f17ad=_0x24b718;speakerEl[_0x3f17ad(0xab)]=_0x51eb56['s']?'【'+_0x51eb56['s']+'】':'',textEl[_0x3f17ad(0xab)]=_0x51eb56['t'];}let lastNavAt=0x0;function navDebounce(_0x55152a){const _0x17bc45=performance['now']();if(_0x17bc45-lastNavAt<0xdc)return;lastNavAt=_0x17bc45,_0x55152a();}function goNext(){navDebounce(()=>advance(+0x1));}function goPrev(){navDebounce(()=>advance(-0x1));}function advance(_0x228202=+0x1){const _0x1545f3=_0x24b718,_0x4e9eab=NARRATIVE[curScene],_0x5d8695=_0x228202>0x0;lineIdx+=_0x228202;if(lineIdx>=0x0&&lineIdx<_0x4e9eab[_0x1545f3(0x7f)]){setLine(_0x4e9eab[lineIdx]);if(lineIdx===0x0&&_0x5d8695)enterEffects(curScene,!![]);if(curScene===SCENES[_0x1545f3(0xaf)]&&_0x5d8695){const _0x18f539=_0x4e9eab[lineIdx]?.['t']||'';if(_0x18f539[_0x1545f3(0xa6)](_0x1545f3(0x79)))openDoor();lineIdx===NARRATIVE[SCENES[_0x1545f3(0xaf)]][_0x1545f3(0x7f)]-0x2&&cameraPunchToDoor();}if(curScene===SCENES[_0x1545f3(0x119)]&&_0x5d8695){const _0x584d94=_0x4e9eab[lineIdx]?.['t']||'';if(_0x584d94[_0x1545f3(0xa6)](_0x1545f3(0x10d)))openDoor();}}else{const _0x1d4d9b=order[_0x1545f3(0x7a)](curScene)+(_0x5d8695?0x1:-0x1);if(_0x1d4d9b>=0x0&&_0x1d4d9b<order[_0x1545f3(0x7f)]){lastScene=curScene,curScene=order[_0x1d4d9b],lineIdx=_0x5d8695?0x0:Math[_0x1545f3(0xe9)](0x0,NARRATIVE[curScene][_0x1545f3(0x7f)]-0x1),setSceneLabel(),setLine(NARRATIVE[curScene][lineIdx]),enterEffects(curScene,!![]);if(_0x5d8695&&curScene===SCENES[_0x1545f3(0x119)]){const _0x15f37c=NARRATIVE[curScene][lineIdx]?.['t']||'';if(_0x15f37c[_0x1545f3(0xa6)](_0x1545f3(0x10d)))openDoor();}window['scrollTo'](0x0,0x0);}else lineIdx=Math[_0x1545f3(0xe9)](0x0,Math[_0x1545f3(0x11f)](_0x4e9eab['length']-0x1,lineIdx));}}let tsX=0x0,tsY=0x0,t0=0x0;function isFromButton(_0x156217){const _0x4381d3=_0x24b718,_0x148da8=_0x156217['composedPath']?_0x156217['composedPath']():[];return _0x148da8[_0x4381d3(0xe6)](_0x3b6fd2=>_0x3b6fd2&&_0x3b6fd2[_0x4381d3(0x130)]&&_0x3b6fd2[_0x4381d3(0x130)]['contains']('btn'));}function onPD(_0x39a5c1){const _0x444b04=_0x24b718,_0x39bd72=_0x39a5c1;tsX=_0x39bd72[_0x444b04(0xf0)],tsY=_0x39bd72[_0x444b04(0xd0)],t0=performance[_0x444b04(0xc7)]();}function onPU(_0x5dd364,_0xb2390c){const _0x1563f3=_0x24b718;if(_0x5dd364[_0x1563f3(0x83)])_0x5dd364[_0x1563f3(0x10b)]();if(isFromButton(_0x5dd364))return;const _0x2c3cde=_0x5dd364[_0x1563f3(0xf0)]-tsX,_0x2f4afa=_0x5dd364[_0x1563f3(0xd0)]-tsY,_0x3396ef=performance['now']()-t0;if(Math[_0x1563f3(0x96)](_0x2c3cde)>0x32&&Math[_0x1563f3(0x96)](_0x2c3cde)>Math[_0x1563f3(0x96)](_0x2f4afa))_0x2c3cde<0x0?goNext():goPrev();else _0x3396ef<0x12c&&Math[_0x1563f3(0x96)](_0x2c3cde)<0xa&&Math[_0x1563f3(0x96)](_0x2f4afa)<0xa&&goNext();}tapAll[_0x24b718(0x101)]('pointerdown',onPD),tapAll['addEventListener'](_0x24b718(0x88),_0x3eb894=>onPU(_0x3eb894,_0x24b718(0xf9))),panelEl['addEventListener']('pointerdown',onPD),panelEl[_0x24b718(0x101)]('pointerup',_0x2515e2=>onPU(_0x2515e2,'panel')),nextBtn[_0x24b718(0x101)](_0x24b718(0x88),_0x55ca6a=>{const _0x4303ef=_0x24b718;_0x55ca6a['stopPropagation']();if(_0x55ca6a[_0x4303ef(0x83)])_0x55ca6a[_0x4303ef(0x10b)]();goNext();}),prevBtn['addEventListener']('pointerup',_0x271f74=>{const _0x2ca907=_0x24b718;_0x271f74[_0x2ca907(0xa1)]();if(_0x271f74[_0x2ca907(0x83)])_0x271f74['preventDefault']();goPrev();});const lightning={'active':![],'time':0x0,'dur':0.35,'hemiBase':0.6,'hemiPeak':1.9,'exposureBase':0x1,'exposurePeak':1.8};function triggerLightning(){const _0x1124e7=_0x24b718;lightning[_0x1124e7(0xa8)]=!![],lightning['time']=0x0,lightning[_0x1124e7(0xcf)]=hemi[_0x1124e7(0xa7)],lightning[_0x1124e7(0xc5)]=renderer['toneMappingExposure'];}function enterEffects(_0x17bb4f){const _0xbfe048=_0x24b718;switch(_0x17bb4f){case SCENES[_0xbfe048(0xd5)]:heatStreet();break;case SCENES['DOOR']:doorCold(),cameraFly(new THREE[(_0xbfe048(0xd9))](0x0,1.4,3.2),new THREE[(_0xbfe048(0xd9))](0x0,1.1,-1.2));break;case SCENES['HIGHLAND']:toHighland();break;case SCENES[_0xbfe048(0x7e)]:toNight();break;case SCENES[_0xbfe048(0xdb)]:if(lastScene===SCENES[_0xbfe048(0x7e)])triggerLightning();descentColdNoPhoto(),startBlizzard();break;case SCENES[_0xbfe048(0x119)]:returnDoor(),cameraFly(new THREE['Vector3'](0x0,1.5,0x3),new THREE[(_0xbfe048(0xd9))](0x0,1.1,-1.3));break;case SCENES[_0xbfe048(0xdd)]:fadeToBlack();break;}}function heatStreet(){const _0x420efd=_0x24b718;setLog(_0x420efd(0xdf)),scene['background']=streetBgTex,scene[_0x420efd(0xc2)][_0x420efd(0x114)]=0x0,ground[_0x420efd(0x107)]=![],motes[_0x420efd(0x107)]=![];if(benchObj)benchObj[_0x420efd(0x107)]=![];if(doorPivot)doorPivot['visible']=![];key[_0x420efd(0xa7)]=0x1,key[_0x420efd(0xff)][_0x420efd(0x92)](0xfff0c9),hemi[_0x420efd(0xa7)]=0.5,hemi[_0x420efd(0xff)][_0x420efd(0x92)](0xffd8aa),hemi[_0x420efd(0x11c)][_0x420efd(0x92)](0x22150f),snow[_0x420efd(0x107)]=![];}function doorCold(){const _0x4b24e9=_0x24b718;setLog(_0x4b24e9(0x11e)),scene[_0x4b24e9(0x10a)]=new THREE[(_0x4b24e9(0xd7))](0xc0f14),scene['fog']['density']=0.022,scene[_0x4b24e9(0xc2)][_0x4b24e9(0xff)][_0x4b24e9(0x92)](0xc0f14),ground[_0x4b24e9(0x107)]=!![],motes[_0x4b24e9(0x107)]=!![];doorPivot&&(doorPivot['visible']=!![],doorPivot[_0x4b24e9(0xba)][_0x4b24e9(0x92)](0x0,0x0,0x0));doorObj&&doorObj[_0x4b24e9(0xe3)]&&(doorObj[_0x4b24e9(0xe3)]['emissive']=new THREE[(_0x4b24e9(0xd7))](0x88aaff),doorObj[_0x4b24e9(0xe3)]['emissiveIntensity']=0.6);doorState[_0x4b24e9(0xb5)]=![],doorState[_0x4b24e9(0x11a)]=![];if(benchObj)benchObj['visible']=![];key[_0x4b24e9(0xa7)]=0.9,key[_0x4b24e9(0xff)][_0x4b24e9(0x92)](0xcfe9ff),hemi[_0x4b24e9(0xa7)]=0.55,hemi[_0x4b24e9(0xff)][_0x4b24e9(0x92)](0x9fefff),hemi[_0x4b24e9(0x11c)]['set'](0xc0f14),snow['visible']=![];}function toHighland(){const _0x3ff90c=_0x24b718;setLog('高原（昼）：写真背景\x20hisyochi.jpg'),scene[_0x3ff90c(0x10a)]=highlandBgTex,scene[_0x3ff90c(0xc2)][_0x3ff90c(0x114)]=0x0,ground[_0x3ff90c(0x107)]=![],motes[_0x3ff90c(0x107)]=![];if(benchObj)benchObj[_0x3ff90c(0x107)]=![];if(doorPivot)doorPivot['visible']=![];hemi[_0x3ff90c(0xa7)]=0.45,hemi[_0x3ff90c(0xff)][_0x3ff90c(0x92)](0xb4ffd0),hemi[_0x3ff90c(0x11c)]['set'](0x1a2d1d),key[_0x3ff90c(0xa7)]=0.6,key[_0x3ff90c(0xff)][_0x3ff90c(0x92)](0xe9fff3),snow[_0x3ff90c(0x107)]=![];}function toNight(){const _0x38ac32=_0x24b718;setLog(_0x38ac32(0xe8)),scene[_0x38ac32(0x10a)]=nightBgTex,scene[_0x38ac32(0xc2)][_0x38ac32(0x114)]=0x0,ground[_0x38ac32(0x107)]=![],motes['visible']=![];if(benchObj)benchObj['visible']=![];if(doorPivot)doorPivot[_0x38ac32(0x107)]=![];hemi[_0x38ac32(0xa7)]=0.35,hemi[_0x38ac32(0xff)][_0x38ac32(0x92)](0xa8d3ff),hemi[_0x38ac32(0x11c)]['set'](0x142026),key[_0x38ac32(0xa7)]=0.4,key[_0x38ac32(0xff)]['set'](0xcfe5ff),snow[_0x38ac32(0x107)]=![];}function descentColdNoPhoto(){const _0x2b5fee=_0x24b718;setLog(_0x2b5fee(0xbd)),scene[_0x2b5fee(0x10a)]=descentBgTex,scene[_0x2b5fee(0xc2)][_0x2b5fee(0xff)][_0x2b5fee(0x92)](0xa0f14),scene[_0x2b5fee(0xc2)][_0x2b5fee(0x114)]=0.04,ground[_0x2b5fee(0x107)]=![],motes[_0x2b5fee(0x107)]=![];if(benchObj)benchObj[_0x2b5fee(0x107)]=![];if(doorPivot)doorPivot[_0x2b5fee(0x107)]=![];key[_0x2b5fee(0xa7)]=0.6,key['color'][_0x2b5fee(0x92)](0xbfdcff),hemi[_0x2b5fee(0xa7)]=0.4,hemi[_0x2b5fee(0xff)][_0x2b5fee(0x92)](0x9fb9ff),hemi[_0x2b5fee(0x11c)][_0x2b5fee(0x92)](0xa0f14);}function returnDoor(){const _0x56e79a=_0x24b718;setLog(_0x56e79a(0xec)),scene[_0x56e79a(0x10a)]=new THREE[(_0x56e79a(0xd7))](0xc0f14),scene[_0x56e79a(0xc2)][_0x56e79a(0x114)]=0.022,scene['fog'][_0x56e79a(0xff)][_0x56e79a(0x92)](0xc0f14),ground[_0x56e79a(0x107)]=!![],motes[_0x56e79a(0x107)]=!![];doorPivot&&(doorPivot[_0x56e79a(0x107)]=!![],doorPivot[_0x56e79a(0xba)][_0x56e79a(0x92)](0x0,0x0,0x0));doorObj&&doorObj[_0x56e79a(0xe3)]&&(doorObj[_0x56e79a(0xe3)][_0x56e79a(0xb0)]=new THREE[(_0x56e79a(0xd7))](0x88aaff),doorObj[_0x56e79a(0xe3)]['emissiveIntensity']=0.6);doorState['opening']=![],doorState[_0x56e79a(0x11a)]=![];if(benchObj)benchObj[_0x56e79a(0x107)]=![];key[_0x56e79a(0xa7)]=0.85,key['color'][_0x56e79a(0x92)](0xe9f3ff),hemi[_0x56e79a(0xa7)]=0.5,hemi[_0x56e79a(0xff)][_0x56e79a(0x92)](0xbad3ff),hemi[_0x56e79a(0x11c)]['set'](0xc0f14),snow[_0x56e79a(0x107)]=![];}function _0x2993(_0x56397f,_0x476b33){const _0x31c88f=_0x31c8();return _0x2993=function(_0x299385,_0xc4a665){_0x299385=_0x299385-0x79;let _0x4eb0c7=_0x31c88f[_0x299385];return _0x4eb0c7;},_0x2993(_0x56397f,_0x476b33);}function fadeToBlack(){const _0x515183=_0x24b718;setLog('終幕'),scene[_0x515183(0x10a)]=new THREE['Color'](0x0);let _0x542ba1=0x0;(function _0x250188(){const _0x3e706f=_0x515183;_0x542ba1+=0.02,scene[_0x3e706f(0xc2)]['density']=THREE[_0x3e706f(0xad)]['lerp'](scene[_0x3e706f(0xc2)][_0x3e706f(0x114)],0.12,0.05);if(_0x542ba1<1.2)requestAnimationFrame(_0x250188);}());}const doorState={'opening':![],'opened':![]};function openDoor(){const _0x3cb8f3=_0x24b718;if(!doorPivot||doorState['opened']||doorState['opening'])return;doorState[_0x3cb8f3(0xb5)]=!![];const _0x3416d3=performance['now'](),_0x48d286=0x320,_0x50f975=0x0,_0x5c997b=-Math['PI']*0x2/0x3;if(doorObj&&doorObj[_0x3cb8f3(0xe3)])doorObj[_0x3cb8f3(0xe3)][_0x3cb8f3(0xb7)]=0.9;function _0x80c14a(_0x3b7d0d){const _0x2f5897=_0x3cb8f3,_0x2fdd43=Math[_0x2f5897(0x11f)](0x1,(_0x3b7d0d-_0x3416d3)/_0x48d286),_0x4d5ddc=0x1-Math[_0x2f5897(0x89)](0x1-_0x2fdd43,0x3);doorPivot['rotation']['y']=_0x50f975+(_0x5c997b-_0x50f975)*_0x4d5ddc;if(_0x2fdd43<0x1)requestAnimationFrame(_0x80c14a);else{doorState[_0x2f5897(0xb5)]=![],doorState['opened']=!![];if(doorObj&&doorObj[_0x2f5897(0xe3)])doorObj[_0x2f5897(0xe3)][_0x2f5897(0xb7)]=0.6;}}requestAnimationFrame(_0x80c14a);}function startBlizzard(){const _0xb00486=_0x24b718;snow['visible']=!![];const _0x21c611=snow[_0xb00486(0xb6)][_0xb00486(0x86)];_0x21c611[_0xb00486(0x112)]=3.2,_0x21c611['fall']=0x6,_0x21c611['turb']=0x4,snow[_0xb00486(0xe3)][_0xb00486(0x95)]=0.14;}let camTween=null;function cameraFly(_0xd9b1ad,_0x9eaf32){const _0x4917d7=_0x24b718,_0x2cea90=camera[_0x4917d7(0xee)][_0x4917d7(0xcc)](),_0x7621a9=controls[_0x4917d7(0x12a)][_0x4917d7(0xcc)](),_0x59e54f=_0xd9b1ad[_0x4917d7(0xcc)](),_0x4fe5bb=_0x9eaf32['clone'](),_0x1f73a3=1.2;let _0x3c0855=0x0;camTween=function _0x30fe73(){const _0x33e7e1=_0x4917d7,_0x424036=clock[_0x33e7e1(0x111)]();_0x3c0855+=_0x424036;const _0x176617=Math['min'](0x1,_0x3c0855/_0x1f73a3),_0x45c71c=ease(_0x176617);camera[_0x33e7e1(0xee)][_0x33e7e1(0xbf)](_0x2cea90,_0x59e54f,_0x45c71c),controls[_0x33e7e1(0x12a)][_0x33e7e1(0xbf)](_0x7621a9,_0x4fe5bb,_0x45c71c);if(_0x176617<0x1)requestAnimationFrame(camTween);else camTween=null;},requestAnimationFrame(camTween);}function ease(_0x19bcb0){const _0x1f23bd=_0x24b718;return _0x19bcb0<0.5?0x4*_0x19bcb0*_0x19bcb0*_0x19bcb0:0x1-Math[_0x1f23bd(0x89)](-0x2*_0x19bcb0+0x2,0x3)/0x2;}function cameraPunchToDoor(){const _0x509aa9=_0x24b718,_0x355e0e=camera[_0x509aa9(0xee)][_0x509aa9(0xcc)](),_0x567c88=controls[_0x509aa9(0x12a)][_0x509aa9(0xcc)](),_0x261360=new THREE[(_0x509aa9(0xd9))](0x0,1.25,-0.6),_0x533b2a=new THREE[(_0x509aa9(0xd9))](0x0,1.1,-0x2),_0x299a8e=0x226,_0x551fbd=performance[_0x509aa9(0xc7)](),_0x357882=controls[_0x509aa9(0x120)];controls[_0x509aa9(0x120)]=![];function _0x4ea502(){const _0x104a7e=_0x509aa9,_0x1e8b82=Math['min'](0x1,(performance['now']()-_0x551fbd)/_0x299a8e),_0x5c308d=0x1-Math[_0x104a7e(0x89)](0x1-_0x1e8b82,0x3);camera[_0x104a7e(0xee)][_0x104a7e(0xbf)](_0x355e0e,_0x261360,_0x5c308d),controls[_0x104a7e(0x12a)]['lerpVectors'](_0x567c88,_0x533b2a,_0x5c308d);if(_0x1e8b82<0x1)requestAnimationFrame(_0x4ea502);else{controls[_0x104a7e(0x120)]=_0x357882;if(doorPivot)doorPivot[_0x104a7e(0x107)]=![];}}requestAnimationFrame(_0x4ea502);}setSceneLabel(),setLine(NARRATIVE[curScene][0x0]),enterEffects(curScene);let lastMeter=0x0;function loop(){const _0x17d9d2=_0x24b718;requestAnimationFrame(loop);const _0x502031=clock[_0x17d9d2(0x111)](),_0x5e89e2=clock['elapsedTime'];if(lightning[_0x17d9d2(0xa8)]){lightning[_0x17d9d2(0x106)]+=_0x502031;const _0xc4b621=Math[_0x17d9d2(0x11f)](lightning[_0x17d9d2(0x106)]/lightning[_0x17d9d2(0xa9)],0x1),_0x3b1c21=0x1-_0xc4b621,_0x3181d1=_0x3b1c21*_0x3b1c21*(0x2-_0x3b1c21);hemi[_0x17d9d2(0xa7)]=lightning[_0x17d9d2(0xcf)]+(lightning[_0x17d9d2(0xda)]-lightning[_0x17d9d2(0xcf)])*_0x3181d1,renderer[_0x17d9d2(0xe1)]=lightning[_0x17d9d2(0xc5)]+(lightning[_0x17d9d2(0xfb)]-lightning['exposureBase'])*_0x3181d1,_0xc4b621>=0x1&&(lightning[_0x17d9d2(0xa8)]=![],hemi[_0x17d9d2(0xa7)]=lightning[_0x17d9d2(0xcf)],renderer[_0x17d9d2(0xe1)]=lightning[_0x17d9d2(0xc5)]);}updateMotes(_0x5e89e2),updateSnow(_0x5e89e2,_0x502031);if(controls[_0x17d9d2(0x120)])controls[_0x17d9d2(0x116)]();renderer['render'](scene,camera);const _0x3b7170=performance['now']();if(_0x3b7170-lastMeter>0x1f4){const _0x3bb976=(0x1/_0x502031)[_0x17d9d2(0x7b)](0x0);fpsEl['textContent']=_0x17d9d2(0xb4)+_0x3bb976,lastMeter=_0x3b7170;}}loop();function updateMotes(_0x427e14){const _0x35d88e=_0x24b718,_0xde3ae9=motes[_0x35d88e(0xac)][_0x35d88e(0xb9)][_0x35d88e(0xee)];for(let _0x461ad8=0x0;_0x461ad8<_0xde3ae9[_0x35d88e(0xb3)];_0x461ad8++){const _0x1c62ee=_0x461ad8*0x3,_0x324bb5=_0xde3ae9[_0x35d88e(0xb1)][_0x1c62ee],_0x801658=_0xde3ae9[_0x35d88e(0xb1)][_0x1c62ee+0x1],_0x19e0b5=_0xde3ae9['array'][_0x1c62ee+0x2],_0x3fb323=curScene===SCENES['STREET']||curScene===SCENES['DOOR']?_0x35d88e(0xa3):_0x35d88e(0xd3),_0x1f1ad6=_0x3fb323===_0x35d88e(0xa3)?Math['sin'](_0x427e14*0x2+_0x324bb5*1.1+_0x19e0b5*0.8)*0.006:Math[_0x35d88e(0x9a)](_0x427e14*0.7+_0x324bb5*0.6+_0x19e0b5*0.5)*0.003;_0xde3ae9[_0x35d88e(0xb1)][_0x1c62ee+0x1]=_0x801658+_0x1f1ad6;}_0xde3ae9['needsUpdate']=!![];}function updateSnow(_0x3e7633,_0x272004){const _0x13e1fa=_0x24b718;if(!snow[_0x13e1fa(0x107)])return;const _0x3fee77=snow['geometry'],_0x17a757=_0x3fee77[_0x13e1fa(0xb9)][_0x13e1fa(0xee)][_0x13e1fa(0xb1)],_0x126213=_0x3fee77[_0x13e1fa(0xb6)]['vel'],_0x24b0e5=snow[_0x13e1fa(0xb6)][_0x13e1fa(0x86)],_0x598c00=0x18;for(let _0x36528d=0x0;_0x36528d<_0x126213['length']/0x3;_0x36528d++){const _0x16be8e=_0x36528d*0x3,_0x127ec5=Math[_0x13e1fa(0x9a)](_0x3e7633*1.7+_0x17a757[_0x16be8e+0x2]*0.12+_0x36528d*0.13)*_0x24b0e5['turb']*0.3,_0x1f98ee=Math[_0x13e1fa(0x10e)](_0x3e7633*1.3+_0x17a757[_0x16be8e]*0.11+_0x36528d*0.17)*_0x24b0e5[_0x13e1fa(0x99)]*0.25;_0x17a757[_0x16be8e+0x0]+=(_0x126213[_0x16be8e+0x0]+_0x24b0e5[_0x13e1fa(0x112)]*0.6+_0x127ec5)*_0x272004,_0x17a757[_0x16be8e+0x1]+=(_0x126213[_0x16be8e+0x1]-_0x24b0e5['fall'])*_0x272004,_0x17a757[_0x16be8e+0x2]+=(_0x126213[_0x16be8e+0x2]+_0x1f98ee)*_0x272004;if(_0x17a757[_0x16be8e+0x1]<-0.5){const _0xc5fe89=Math['random']()*Math['PI']*0x2,_0x5a2728=Math[_0x13e1fa(0x91)](Math[_0x13e1fa(0x12f)]())*_0x598c00;_0x17a757[_0x16be8e+0x0]=Math[_0x13e1fa(0x10e)](_0xc5fe89)*_0x5a2728,_0x17a757[_0x16be8e+0x2]=Math[_0x13e1fa(0x9a)](_0xc5fe89)*_0x5a2728,_0x17a757[_0x16be8e+0x1]=Math['random']()*0x6+0x4,_0x126213[_0x16be8e+0x0]=Math[_0x13e1fa(0x12f)]()*0.2-0.1,_0x126213[_0x16be8e+0x1]=-(Math[_0x13e1fa(0x12f)]()*0.6+0.4),_0x126213[_0x16be8e+0x2]=Math[_0x13e1fa(0x12f)]()*0.2-0.1;}}_0x3fee77['attributes'][_0x13e1fa(0xee)][_0x13e1fa(0x123)]=!![];}function onResize(){const _0x52dfb8=_0x24b718,_0x261723=innerWidth,_0x468b83=innerHeight;renderer[_0x52dfb8(0xce)](_0x261723,_0x468b83),camera[_0x52dfb8(0xf4)]=_0x261723/_0x468b83,camera[_0x52dfb8(0xc8)](),window[_0x52dfb8(0x8d)](0x0,0x0);}window[_0x24b718(0x101)](_0x24b718(0x9e),onResize),window[_0x24b718(0x101)](_0x24b718(0x9d),()=>{setTimeout(onResize,0xc8);}),document[_0x24b718(0x101)](_0x24b718(0x11d),_0x4919b6=>{const _0x49e36e=_0x24b718;(_0x4919b6['key']===_0x49e36e(0xe0)||_0x4919b6['key']==='\x20')&&goNext(),_0x4919b6[_0x49e36e(0x80)]===_0x49e36e(0xbe)&&goPrev();});
</script>
</body>
</html>
