<!DOCTYPE html>
<!--
Project: 避暑地への扉 — ノベルゲー風プロトタイプ
Author: <Cody@IT-journey>
Year: 2025
Demo: https://<YOUR-USERNAME>.github.io/<REPO-NAME>/
License: MIT（see LICENSE）

Third-party (via jsDelivr CDN, version pinned):
  - three.js r146 (MIT) © 2010–2025 three.js authors
    https://cdn.jsdelivr.net/npm/three@0.146.0/build/three.min.js
    https://cdn.jsdelivr.net/npm/three@0.146.0/examples/js/controls/OrbitControls.js
    https://cdn.jsdelivr.net/npm/three@0.146.0/examples/js/loaders/GLTFLoader.js

Assets:
  - Background images: Generated by AI by the author（詳細は ASSETS.md に記載）

Notes:
  - 展示・オフライン・CDNブロック環境では上記ファイルを vendor/ に同梱し、
    <script src="..."> の参照先をローカルに切り替えてください。
-->
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>避暑地への扉</title>
<!-- OGP / Twitter Card : ここから追記 -->
<!-- OGP / Twitter Card (v2, PNG版) -->
<meta property="og:title" content="避暑地への扉 — ノベルゲー風プロトタイプ">
<meta property="og:description" content="生成AI×単一HTMLで小説をノベルゲーム風に動かした最短プロトタイプ。">
<meta property="og:type" content="website">
<meta property="og:url" content="https://tools001.github.io/note/001-tobira-v2/">
<meta property="og:image" content="https://tools001.github.io/note/001-tobira-v2/ogp.png">
<meta property="og:image:secure_url" content="https://tools001.github.io/note/001-tobira-v2/ogp.png">
<meta property="og:image:type" content="image/png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:locale" content="ja_JP">
<meta property="og:site_name" content="tools001.github.io">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="避暑地への扉 — ノベルゲー風プロトタイプ">
<meta name="twitter:description" content="生成AI×単一HTMLで小説をノベルゲーム風に動かした最短プロトタイプ。">
<meta name="twitter:image" content="https://tools001.github.io/note/001-tobira-v2/ogp.png">
<link rel="canonical" href="https://tools001.github.io/note/001-tobira-v2/">
<!-- OGP / Twitter Card : ここまで -->
<style>
  :root{ --bg:#07070a; --fg:#eaeef7; }
  html,body{
    margin:0;height:100%;
    background:var(--bg);color:var(--fg);
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,"Hiragino Kaku Gothic ProN","Yu Gothic",Meiryo,sans-serif;
    overflow:hidden;
    overscroll-behavior:none;
    touch-action:none;                 /* 自前ジェスチャ */
    -webkit-user-select:none; user-select:none;
    -webkit-tap-highlight-color:transparent;
  }
  canvas{ display:block; touch-action:none; -webkit-tap-highlight-color:transparent; }

  /* レイヤー：canvas(0) < tapAll(1) < HUD(3) */
  .hud{position:fixed;inset:0;pointer-events:none; z-index:3;}
  #tapAll{position:fixed;inset:0; z-index:1; pointer-events:auto;} /* 全画面タップ用 */

  .top{position:absolute;left:12px;top:10px;right:12px;display:flex;gap:8px;align-items:center;opacity:.9}
  .chip{pointer-events:auto;border:1px solid #333;padding:6px 10px;border-radius:999px;font-size:12px;background:#1116}
  .log{margin-left:auto;font-size:12px;opacity:.75}

  /* 右上類を非表示 */
  #sceneChip{ display:none; }
  #fps{ display:none; }
  #log{ display:none; }

  .panel{
    position:absolute;left:0;right:0;bottom:0;
    padding:18px 16px 24px;
    background:linear-gradient(180deg,#0000,#0006 40%,#0009);
    pointer-events:auto;
    z-index:3;
  }
  .textbox{
    max-width:min(980px,92vw);
    margin:0 auto;
    padding:14px 18px;
    border:1px solid #1b1f28;border-radius:14px;
    background:rgba(11,13,18,.35);          /* 半透明 */
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    box-shadow:0 8px 24px rgba(0,0,0,.25);
    font-size:16px;line-height:1.9;

    display:grid;
    grid-template-rows: 1.4em auto auto;
    row-gap:10px;
    align-items:start;
    -webkit-user-select:none; user-select:none;
  }
  .speaker{ opacity:.85;font-size:13px;line-height:1.4em; min-height:1.4em; }
  #text{ margin:0; white-space:pre-wrap; word-break:break-word; }

  .controls{display:flex;gap:14px;justify-content:flex-end}
  .btn{
    pointer-events:auto;border:1px solid #2a2a2a;background:#101318;
    padding:16px 24px;border-radius:14px;color:var(--fg);
    font-weight:600;letter-spacing:.02em;cursor:pointer;transition:.18s;
    font-size:18px;min-height:48px;
    -webkit-user-select:none; user-select:none;
    touch-action:none;
  }
  .btn:hover{transform:translateY(-1px);box-shadow:0 6px 16px #0006}

  .vignette{position:fixed;inset:-3px;background:radial-gradient(ellipse at center,#0000 45%,#0004 70%,#0009 100%);pointer-events:none; z-index:2;}
  @media (max-width:600px){
    .textbox{font-size:15px; grid-template-rows: 1.4em auto auto;}
  }
</style>
</head>
<body>
<div id="tapAll" aria-hidden="true"></div>

<div class="hud">
  <div class="top">
    <div class="chip" id="sceneChip">Scene: --</div>
    <div class="chip" id="fps">FPS: --</div>
    <div class="log" id="log">読み込み中…</div>
  </div>
  <div class="panel">
    <div class="textbox">
      <div class="speaker" id="speaker"></div>
      <div id="text"></div>
      <div class="controls">
        <button class="btn" id="prevBtn">◀ 戻る</button>
        <button class="btn" id="nextBtn">次へ ▶</button>
      </div>
    </div>
  </div>
  <div class="vignette"></div>
</div>

<!-- Three.js r146（グローバル） -->
<script src="https://cdn.jsdelivr.net/npm/three@0.146.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.146.0/examples/js/controls/OrbitControls.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.146.0/examples/js/loaders/GLTFLoader.js"></script>

<script>
const _0xfe9835=_0x1fc9;(function(_0x31e7dd,_0x50e596){const _0x346489=_0x1fc9,_0x377f79=_0x31e7dd();while(!![]){try{const _0x419308=parseInt(_0x346489(0xf4))/0x1*(-parseInt(_0x346489(0xdd))/0x2)+parseInt(_0x346489(0x13a))/0x3*(parseInt(_0x346489(0xf0))/0x4)+parseInt(_0x346489(0xbc))/0x5*(-parseInt(_0x346489(0x116))/0x6)+parseInt(_0x346489(0x141))/0x7*(-parseInt(_0x346489(0x15d))/0x8)+-parseInt(_0x346489(0x105))/0x9+parseInt(_0x346489(0x122))/0xa+parseInt(_0x346489(0xb8))/0xb;if(_0x419308===_0x50e596)break;else _0x377f79['push'](_0x377f79['shift']());}catch(_0x1ca3a0){_0x377f79['push'](_0x377f79['shift']());}}}(_0x359e,0x33df8));const ASSETS={'doorModel':null,'benchModel':null},renderer=new THREE['WebGLRenderer']({'antialias':!![],'powerPreference':_0xfe9835(0x117)});renderer[_0xfe9835(0x15c)](Math[_0xfe9835(0xe0)](devicePixelRatio,0x2)),renderer[_0xfe9835(0x175)](window[_0xfe9835(0x115)],window[_0xfe9835(0xcc)]),renderer[_0xfe9835(0x164)]=THREE[_0xfe9835(0xd6)],renderer[_0xfe9835(0x13e)]=0x1,document[_0xfe9835(0xf8)][_0xfe9835(0xd1)](renderer[_0xfe9835(0xf6)]);const scene=new THREE['Scene']();scene[_0xfe9835(0xeb)]=new THREE['Color'](0x6070a),scene[_0xfe9835(0xf3)]=new THREE[(_0xfe9835(0xc3))](0x6070a,0.02);const camera=new THREE[(_0xfe9835(0x16d))](0x37,window[_0xfe9835(0x115)]/window[_0xfe9835(0xcc)],0.1,0xc8);camera[_0xfe9835(0xd9)]['set'](0x0,1.6,0x6);const controls=new THREE['OrbitControls'](camera,renderer['domElement']);controls[_0xfe9835(0x152)]=!![],controls[_0xfe9835(0x112)]=![],controls[_0xfe9835(0x137)]=1.2,controls[_0xfe9835(0x12a)]=0xc;const clock=new THREE['Clock'](),hemi=new THREE[(_0xfe9835(0x159))](0x7ea6ff,0x101018,0.6);scene[_0xfe9835(0xf9)](hemi);const key=new THREE['DirectionalLight'](0xffffff,0x1);key[_0xfe9835(0xd9)][_0xfe9835(0xc7)](0x4,0x6,0x3),scene[_0xfe9835(0xf9)](key);const groundMat=new THREE[(_0xfe9835(0xe5))]({'color':0x111317,'roughness':0.98}),ground=new THREE[(_0xfe9835(0xc6))](new THREE[(_0xfe9835(0x172))](0x64,0x64),groundMat);ground[_0xfe9835(0xe6)]['x']=-Math['PI']/0x2,ground[_0xfe9835(0xd2)]=!![],scene[_0xfe9835(0xf9)](ground);const texLoader=new THREE[(_0xfe9835(0x165))](),streetBgTex=texLoader[_0xfe9835(0x127)](_0xfe9835(0x101),_0x13c3f6=>{const _0x3c7994=_0xfe9835;_0x13c3f6[_0x3c7994(0x153)]=THREE[_0x3c7994(0xd6)],_0x13c3f6[_0x3c7994(0x11a)]=THREE[_0x3c7994(0xca)];}),highlandBgTex=texLoader[_0xfe9835(0x127)](_0xfe9835(0x160),_0x43c566=>{const _0x4f1f77=_0xfe9835;_0x43c566['encoding']=THREE[_0x4f1f77(0xd6)],_0x43c566[_0x4f1f77(0x11a)]=THREE[_0x4f1f77(0xca)];}),nightBgTex=texLoader[_0xfe9835(0x127)](_0xfe9835(0x108),_0x3466ee=>{const _0x3d04a4=_0xfe9835;_0x3466ee[_0x3d04a4(0x153)]=THREE[_0x3d04a4(0xd6)],_0x3466ee['minFilter']=THREE[_0x3d04a4(0xca)];}),descentBgTex=texLoader[_0xfe9835(0x127)](_0xfe9835(0xe1),_0x4f3f9b=>{const _0x45c164=_0xfe9835;_0x4f3f9b[_0x45c164(0x153)]=THREE['sRGBEncoding'],_0x4f3f9b[_0x45c164(0x11a)]=THREE[_0x45c164(0xca)];}),motes=makeMotes(0x104);scene['add'](motes);const circleTex=makeCircleTexture(0x40),snow=makeSnow(0x578,circleTex);snow[_0xfe9835(0xc4)]=![],scene[_0xfe9835(0xf9)](snow);const loader=new THREE[(_0xfe9835(0xcf))]();let doorObj,doorPivot,benchObj;(async function ensureModels(){const _0x5ae82c=_0xfe9835;ASSETS[_0x5ae82c(0xb9)]?doorObj=(await loadGLB(ASSETS[_0x5ae82c(0xb9)]))['scene']:doorObj=new THREE[(_0x5ae82c(0xc6))](new THREE[(_0x5ae82c(0x176))](0x1,0x2,0.08),new THREE[(_0x5ae82c(0xe5))]({'color':0xcad5ff,'metalness':0.1,'roughness':0.2,'emissive':0x112244})),doorPivot=new THREE[(_0x5ae82c(0xf1))](),doorPivot[_0x5ae82c(0xd9)][_0x5ae82c(0xc7)](-0.45,0x1,-0x2),doorObj['position'][_0x5ae82c(0xc7)](0.5,0x0,0x0),doorPivot[_0x5ae82c(0xf9)](doorObj),doorPivot[_0x5ae82c(0xc4)]=![],scene[_0x5ae82c(0xf9)](doorPivot),ASSETS[_0x5ae82c(0x11f)]?benchObj=(await loadGLB(ASSETS[_0x5ae82c(0x11f)]))[_0x5ae82c(0x147)]:benchObj=makeBench(),benchObj['visible']=![],scene[_0x5ae82c(0xf9)](benchObj);}());function loadGLB(_0x1f4e7d){return new Promise((_0x232943,_0x390c0f)=>loader['load'](_0x1f4e7d,_0x232943,undefined,_0x390c0f));}function makeMotes(_0x56cfd4=0xc8){const _0x3535c5=_0xfe9835,_0x9df849=new THREE[(_0x3535c5(0x146))](),_0x4e6e9c=new Float32Array(_0x56cfd4*0x3);for(let _0x5de126=0x0;_0x5de126<_0x56cfd4;_0x5de126++){const _0x301090=Math[_0x3535c5(0xd4)]()*0x10+0x2,_0xff587a=Math[_0x3535c5(0xd4)]()*Math['PI']*0x2;_0x4e6e9c[_0x5de126*0x3+0x0]=Math[_0x3535c5(0x13b)](_0xff587a)*_0x301090,_0x4e6e9c[_0x5de126*0x3+0x1]=Math[_0x3535c5(0xd4)]()*2.4+0.2,_0x4e6e9c[_0x5de126*0x3+0x2]=Math[_0x3535c5(0xdb)](_0xff587a)*_0x301090;}return _0x9df849[_0x3535c5(0xda)](_0x3535c5(0xd9),new THREE[(_0x3535c5(0x15f))](_0x4e6e9c,0x3)),new THREE[(_0x3535c5(0x139))](_0x9df849,new THREE[(_0x3535c5(0x11e))]({'size':0.04,'transparent':!![],'opacity':0.6,'depthWrite':![]}));}function makeCircleTexture(_0x3e6634=0x40){const _0x94e8a8=_0xfe9835,_0x373b2a=document['createElement']('canvas');_0x373b2a[_0x94e8a8(0xb4)]=_0x373b2a['height']=_0x3e6634;const _0x6e8e55=_0x373b2a[_0x94e8a8(0x14c)]('2d'),_0xd26730=_0x3e6634*0.45,_0x545445=_0x3e6634/0x2,_0x164e5c=_0x3e6634/0x2,_0x19442f=_0x6e8e55[_0x94e8a8(0x12f)](_0x545445,_0x164e5c,_0xd26730*0.2,_0x545445,_0x164e5c,_0xd26730);_0x19442f['addColorStop'](0x0,_0x94e8a8(0xd7)),_0x19442f[_0x94e8a8(0xfc)](0.6,_0x94e8a8(0xbd)),_0x19442f[_0x94e8a8(0xfc)](0x1,_0x94e8a8(0xec)),_0x6e8e55[_0x94e8a8(0xbf)](0x0,0x0,_0x3e6634,_0x3e6634),_0x6e8e55['fillStyle']=_0x19442f,_0x6e8e55[_0x94e8a8(0x104)](),_0x6e8e55[_0x94e8a8(0x12c)](_0x545445,_0x164e5c,_0xd26730,0x0,Math['PI']*0x2),_0x6e8e55[_0x94e8a8(0x131)]();const _0x269955=new THREE[(_0x94e8a8(0x158))](_0x373b2a);return _0x269955[_0x94e8a8(0x11a)]=THREE[_0x94e8a8(0xca)],_0x269955;}function makeSnow(_0x5a330f=0x4b0,_0x45be08){const _0x271ef3=_0xfe9835,_0xf8f1f9=new THREE[(_0x271ef3(0x146))](),_0x453120=new Float32Array(_0x5a330f*0x3),_0x2a8dd2=new Float32Array(_0x5a330f*0x3),_0x141fd6=0x16;for(let _0x19f8e8=0x0;_0x19f8e8<_0x5a330f;_0x19f8e8++){const _0x462cac=Math[_0x271ef3(0xd4)]()*Math['PI']*0x2,_0x534802=Math[_0x271ef3(0xef)](Math[_0x271ef3(0xd4)]())*_0x141fd6;_0x453120[_0x19f8e8*0x3+0x0]=Math[_0x271ef3(0x13b)](_0x462cac)*_0x534802,_0x453120[_0x19f8e8*0x3+0x2]=Math['sin'](_0x462cac)*_0x534802,_0x453120[_0x19f8e8*0x3+0x1]=Math[_0x271ef3(0xd4)]()*0x8+0x2,_0x2a8dd2[_0x19f8e8*0x3+0x0]=Math[_0x271ef3(0xd4)]()*0.2-0.1,_0x2a8dd2[_0x19f8e8*0x3+0x1]=-(Math[_0x271ef3(0xd4)]()*0.6+0.4),_0x2a8dd2[_0x19f8e8*0x3+0x2]=Math[_0x271ef3(0xd4)]()*0.2-0.1;}_0xf8f1f9[_0x271ef3(0xda)](_0x271ef3(0xd9),new THREE['BufferAttribute'](_0x453120,0x3)),_0xf8f1f9[_0x271ef3(0x14f)][_0x271ef3(0x106)]=_0x2a8dd2;const _0x7f5bfa=new THREE[(_0x271ef3(0x11e))]({'size':0.08,'map':_0x45be08,'transparent':!![],'alphaTest':0.08,'opacity':0.95,'depthWrite':![]}),_0x107b07=new THREE[(_0x271ef3(0x139))](_0xf8f1f9,_0x7f5bfa);return _0x107b07[_0x271ef3(0x14f)][_0x271ef3(0x12d)]={'windX':0.4,'fall':0.8,'turb':0.8},_0x107b07;}function makeBench(){const _0xa6b56d=_0xfe9835,_0x932516=new THREE[(_0xa6b56d(0xf1))](),_0x1f629b=new THREE[(_0xa6b56d(0xe5))]({'color':0x6c553a,'roughness':0.8}),_0x3fd923=new THREE[(_0xa6b56d(0xe5))]({'color':0x555,'metalness':0.7,'roughness':0.4});for(let _0x1fece4=0x0;_0x1fece4<0x4;_0x1fece4++){const _0x1e86e9=new THREE['Mesh'](new THREE['BoxGeometry'](1.4,0.08,0.22),_0x1f629b);_0x1e86e9[_0xa6b56d(0xd9)][_0xa6b56d(0xc7)](0x0,0.5+_0x1fece4*0.09,-0.2),_0x932516[_0xa6b56d(0xf9)](_0x1e86e9);}const _0x270b11=new THREE['CylinderGeometry'](0.03,0.03,0.6,0xc),_0x914649=new THREE[(_0xa6b56d(0xc6))](_0x270b11,_0x3fd923);_0x914649[_0xa6b56d(0xd9)]['set'](-0.55,0.3,-0.3);const _0x3d728f=_0x914649['clone']();return _0x3d728f[_0xa6b56d(0xd9)]['x']=0.55,_0x932516[_0xa6b56d(0xf9)](_0x914649,_0x3d728f),_0x932516[_0xa6b56d(0xd9)][_0xa6b56d(0xc7)](-1.4,0x0,-1.5),_0x932516;}const SCENES={'STREET':'STREET','DOOR':_0xfe9835(0x154),'HIGHLAND':_0xfe9835(0xd5),'NIGHT':_0xfe9835(0x170),'DESCENT':_0xfe9835(0x16a),'ONEYEAR':_0xfe9835(0xfb),'END':_0xfe9835(0xfa)},NARRATIVE={[SCENES[_0xfe9835(0x15e)]]:[{'t':_0xfe9835(0x177),'s':'悠人'},{'t':'夏休みの最終日、親友の中村亮（なかむら・りょう）と一緒に、部活帰りに本屋へ寄る予定だった。'},{'t':'去年までは、もう一人そこにいた。僕と亮がそろって好意を寄せていた女子――佐々木美奈（ささき・みな）。'},{'t':_0xfe9835(0x11d)},{'t':_0xfe9835(0x142)},{'t':_0xfe9835(0x162)},{'t':_0xfe9835(0x133),'s':'亮'},{'t':_0xfe9835(0x167),'s':'悠人'}],[SCENES[_0xfe9835(0x154)]]:[{'t':'ふと横の路地に白い靄がゆらめく。そこだけ空気が冷えているように見えた。'},{'t':'――ひんやりとした風。冷たい扉が、場違いにそこへ据えられていた。'},{'t':_0xfe9835(0x16e)},{'t':'僕も一歩踏み出しかけて、ふと足が止まる。ギィィ……と音を立て、扉がひとりでに開いた。'},{'t':'次の瞬間、ドンッ！\x20背中を強く押され、僕は中へ吸い込まれた。'},{'t':_0xfe9835(0xe7)}],[SCENES[_0xfe9835(0xd5)]]:[{'t':'そこは灼熱の街ではなかった。眼前には高原の避暑地が広がっていた。'},{'t':_0xfe9835(0x16f)},{'t':_0xfe9835(0xce),'s':'悠人'}],[SCENES[_0xfe9835(0x170)]]:[{'t':_0xfe9835(0x10f)},{'t':_0xfe9835(0x14d)},{'t':_0xfe9835(0xf2)},{'t':_0xfe9835(0x110)},{'t':_0xfe9835(0x13d)},{'t':_0xfe9835(0x10d)},{'t':_0xfe9835(0xb7)},{'t':_0xfe9835(0xf7)},{'t':_0xfe9835(0x169)},{'t':_0xfe9835(0x161)},{'t':_0xfe9835(0x128)}],[SCENES[_0xfe9835(0x16a)]]:[{'t':_0xfe9835(0xe8)},{'t':_0xfe9835(0x174)},{'t':_0xfe9835(0x121)},{'t':_0xfe9835(0x136),'s':'美奈の声'},{'t':_0xfe9835(0xed)},{'t':'いっそ、自分がここで凍りつけばいいのかもしれない。だが、冷気はいずれ正気を奪ってしまう。'}],[SCENES[_0xfe9835(0xfb)]]:[{'t':_0xfe9835(0xe4)},{'t':_0xfe9835(0x126)},{'t':_0xfe9835(0xf5)},{'t':'その温もりは、かつて僕が守りたかった誰かのものと同じだった。けれど次の夏には、もう別の誰かのものになっているのだろう。'}],[SCENES[_0xfe9835(0xfa)]]:[{'t':_0xfe9835(0x12e)}]},$=_0x2b2513=>document[_0xfe9835(0xbe)](_0x2b2513),speakerEl=$('speaker'),textEl=$(_0xfe9835(0x163)),nextBtn=$('nextBtn'),prevBtn=$(_0xfe9835(0xd0)),fpsEl=$('fps'),logEl=$(_0xfe9835(0x10e)),sceneChip=$(_0xfe9835(0x10a)),tapAll=$('tapAll'),panelEl=document['querySelector'](_0xfe9835(0xea));let order=[SCENES[_0xfe9835(0x15e)],SCENES[_0xfe9835(0x154)],SCENES[_0xfe9835(0xd5)],SCENES[_0xfe9835(0x170)],SCENES[_0xfe9835(0x16a)],SCENES[_0xfe9835(0xfb)],SCENES[_0xfe9835(0xfa)]],curScene=order[0x0],lineIdx=0x0,lastScene=null;function setSceneLabel(){const _0x266300=_0xfe9835;sceneChip[_0x266300(0x10b)]=_0x266300(0xd8)+curScene;}function setLog(_0x19d5dd){logEl['textContent']=_0x19d5dd;}function setLine(_0xfe03d9){const _0x164604=_0xfe9835;speakerEl['textContent']=_0xfe03d9['s']?'【'+_0xfe03d9['s']+'】':'',textEl[_0x164604(0x10b)]=_0xfe03d9['t'];}let lastNavAt=0x0;function navDebounce(_0x20d3ab){const _0xe5420c=_0xfe9835,_0x5b18df=performance[_0xe5420c(0x10c)]();if(_0x5b18df-lastNavAt<0xdc)return;lastNavAt=_0x5b18df,_0x20d3ab();}function goNext(){navDebounce(()=>advance(+0x1));}function goPrev(){navDebounce(()=>advance(-0x1));}function advance(_0x184c03=+0x1){const _0x195c4d=_0xfe9835,_0x4b3964=NARRATIVE[curScene],_0x149510=_0x184c03>0x0;lineIdx+=_0x184c03;if(lineIdx>=0x0&&lineIdx<_0x4b3964[_0x195c4d(0x155)]){setLine(_0x4b3964[lineIdx]);if(lineIdx===0x0&&_0x149510)enterEffects(curScene,!![]);if(curScene===SCENES[_0x195c4d(0x154)]&&_0x149510){const _0x28d647=_0x4b3964[lineIdx]?.['t']||'';if(_0x28d647['includes'](_0x195c4d(0x157)))openDoor();lineIdx===NARRATIVE[SCENES[_0x195c4d(0x154)]][_0x195c4d(0x155)]-0x2&&cameraPunchToDoor();}if(curScene===SCENES[_0x195c4d(0xfb)]&&_0x149510){const _0x69d48c=_0x4b3964[lineIdx]?.['t']||'';if(_0x69d48c[_0x195c4d(0x102)](_0x195c4d(0x13c)))openDoor();}}else{const _0x4588c9=order[_0x195c4d(0x151)](curScene)+(_0x149510?0x1:-0x1);if(_0x4588c9>=0x0&&_0x4588c9<order[_0x195c4d(0x155)]){lastScene=curScene,curScene=order[_0x4588c9],lineIdx=_0x149510?0x0:Math['max'](0x0,NARRATIVE[curScene][_0x195c4d(0x155)]-0x1),setSceneLabel(),setLine(NARRATIVE[curScene][lineIdx]),enterEffects(curScene,!![]);if(_0x149510&&curScene===SCENES[_0x195c4d(0xfb)]){const _0x128cfc=NARRATIVE[curScene][lineIdx]?.['t']||'';if(_0x128cfc[_0x195c4d(0x102)](_0x195c4d(0x13c)))openDoor();}window[_0x195c4d(0x14a)](0x0,0x0);}else lineIdx=Math[_0x195c4d(0xb3)](0x0,Math[_0x195c4d(0xe0)](_0x4b3964[_0x195c4d(0x155)]-0x1,lineIdx));}}let tsX=0x0,tsY=0x0,t0=0x0;function isFromButton(_0x4d324b){const _0x3d7437=_0xfe9835,_0x47b9d7=_0x4d324b[_0x3d7437(0xc5)]?_0x4d324b[_0x3d7437(0xc5)]():[];return _0x47b9d7[_0x3d7437(0xbb)](_0x4b272c=>_0x4b272c&&_0x4b272c[_0x3d7437(0x173)]&&_0x4b272c[_0x3d7437(0x173)][_0x3d7437(0xcd)]('btn'));}function onPD(_0x3d65bd){const _0x5440a1=_0xfe9835,_0x5824a9=_0x3d65bd;tsX=_0x5824a9[_0x5440a1(0x125)],tsY=_0x5824a9[_0x5440a1(0xc0)],t0=performance[_0x5440a1(0x10c)]();}function onPU(_0xa4c007,_0x5ab4ae){const _0x534028=_0xfe9835;if(_0xa4c007['cancelable'])_0xa4c007[_0x534028(0x113)]();if(isFromButton(_0xa4c007))return;const _0x5aec8d=_0xa4c007['clientX']-tsX,_0x5f0038=_0xa4c007['clientY']-tsY,_0x4ccaa2=performance[_0x534028(0x10c)]()-t0;if(Math[_0x534028(0x144)](_0x5aec8d)>0x32&&Math[_0x534028(0x144)](_0x5aec8d)>Math['abs'](_0x5f0038))_0x5aec8d<0x0?goNext():goPrev();else _0x4ccaa2<0x12c&&Math[_0x534028(0x144)](_0x5aec8d)<0xa&&Math['abs'](_0x5f0038)<0xa&&goNext();}tapAll[_0xfe9835(0x16b)](_0xfe9835(0xe9),onPD),tapAll['addEventListener']('pointerup',_0x2bb4f8=>onPU(_0x2bb4f8,'all')),panelEl['addEventListener'](_0xfe9835(0xe9),onPD),panelEl[_0xfe9835(0x16b)](_0xfe9835(0x12b),_0x113af1=>onPU(_0x113af1,_0xfe9835(0xc9))),nextBtn[_0xfe9835(0x16b)]('pointerup',_0x42bd36=>{const _0xe3372e=_0xfe9835;_0x42bd36[_0xe3372e(0x118)]();if(_0x42bd36[_0xe3372e(0x132)])_0x42bd36[_0xe3372e(0x113)]();goNext();}),prevBtn[_0xfe9835(0x16b)](_0xfe9835(0x12b),_0x2c68dc=>{const _0x4c3312=_0xfe9835;_0x2c68dc['stopPropagation']();if(_0x2c68dc[_0x4c3312(0x132)])_0x2c68dc[_0x4c3312(0x113)]();goPrev();});const lightning={'active':![],'time':0x0,'dur':0.35,'hemiBase':0.6,'hemiPeak':1.9,'exposureBase':0x1,'exposurePeak':1.8};function _0x1fc9(_0x316081,_0x204027){const _0x359e4c=_0x359e();return _0x1fc9=function(_0x1fc9d4,_0xbef43f){_0x1fc9d4=_0x1fc9d4-0xb3;let _0x1cac60=_0x359e4c[_0x1fc9d4];return _0x1cac60;},_0x1fc9(_0x316081,_0x204027);}function triggerLightning(){const _0xd3104b=_0xfe9835;lightning[_0xd3104b(0x145)]=!![],lightning[_0xd3104b(0x138)]=0x0,lightning[_0xd3104b(0xe2)]=hemi[_0xd3104b(0x129)],lightning[_0xd3104b(0x14b)]=renderer[_0xd3104b(0x13e)];}function enterEffects(_0x57e0f6){const _0x53b201=_0xfe9835;switch(_0x57e0f6){case SCENES[_0x53b201(0x15e)]:heatStreet();break;case SCENES[_0x53b201(0x154)]:doorCold(),cameraFly(new THREE['Vector3'](0x0,1.4,3.2),new THREE[(_0x53b201(0x135))](0x0,1.1,-1.2));break;case SCENES['HIGHLAND']:toHighland();break;case SCENES[_0x53b201(0x170)]:toNight();break;case SCENES[_0x53b201(0x16a)]:if(lastScene===SCENES[_0x53b201(0x170)])triggerLightning();descentColdNoPhoto(),startBlizzard();break;case SCENES[_0x53b201(0xfb)]:returnDoor(),cameraFly(new THREE[(_0x53b201(0x135))](0x0,1.5,0x3),new THREE[(_0x53b201(0x135))](0x0,1.1,-1.3));break;case SCENES[_0x53b201(0xfa)]:fadeToBlack();break;}}function heatStreet(){const _0x3dd4d4=_0xfe9835;setLog(_0x3dd4d4(0xcb)),scene[_0x3dd4d4(0xeb)]=streetBgTex,scene[_0x3dd4d4(0xf3)]['density']=0x0,ground[_0x3dd4d4(0xc4)]=![],motes['visible']=![];if(benchObj)benchObj['visible']=![];if(doorPivot)doorPivot[_0x3dd4d4(0xc4)]=![];key[_0x3dd4d4(0x129)]=0x1,key[_0x3dd4d4(0x11b)]['set'](0xfff0c9),hemi[_0x3dd4d4(0x129)]=0.5,hemi[_0x3dd4d4(0x11b)]['set'](0xffd8aa),hemi[_0x3dd4d4(0xc1)][_0x3dd4d4(0xc7)](0x22150f),snow[_0x3dd4d4(0xc4)]=![];}function doorCold(){const _0x28decc=_0xfe9835;setLog(_0x28decc(0x119)),scene['background']=new THREE['Color'](0xc0f14),scene[_0x28decc(0xf3)]['density']=0.022,scene[_0x28decc(0xf3)][_0x28decc(0x11b)][_0x28decc(0xc7)](0xc0f14),ground[_0x28decc(0xc4)]=!![],motes['visible']=!![];doorPivot&&(doorPivot[_0x28decc(0xc4)]=!![],doorPivot[_0x28decc(0xe6)][_0x28decc(0xc7)](0x0,0x0,0x0));doorObj&&doorObj[_0x28decc(0x114)]&&(doorObj[_0x28decc(0x114)][_0x28decc(0x149)]=new THREE[(_0x28decc(0x14e))](0x88aaff),doorObj[_0x28decc(0x114)][_0x28decc(0x143)]=0.6);doorState['opening']=![],doorState[_0x28decc(0x103)]=![];if(benchObj)benchObj[_0x28decc(0xc4)]=![];key[_0x28decc(0x129)]=0.9,key[_0x28decc(0x11b)][_0x28decc(0xc7)](0xcfe9ff),hemi[_0x28decc(0x129)]=0.55,hemi['color'][_0x28decc(0xc7)](0x9fefff),hemi['groundColor'][_0x28decc(0xc7)](0xc0f14),snow['visible']=![];}function toHighland(){const _0x2e8598=_0xfe9835;setLog('高原（昼）：写真背景\x20hisyochi.jpg'),scene[_0x2e8598(0xeb)]=highlandBgTex,scene[_0x2e8598(0xf3)][_0x2e8598(0x168)]=0x0,ground['visible']=![],motes[_0x2e8598(0xc4)]=![];if(benchObj)benchObj[_0x2e8598(0xc4)]=![];if(doorPivot)doorPivot['visible']=![];hemi[_0x2e8598(0x129)]=0.45,hemi[_0x2e8598(0x11b)][_0x2e8598(0xc7)](0xb4ffd0),hemi[_0x2e8598(0xc1)][_0x2e8598(0xc7)](0x1a2d1d),key[_0x2e8598(0x129)]=0.6,key[_0x2e8598(0x11b)][_0x2e8598(0xc7)](0xe9fff3),snow[_0x2e8598(0xc4)]=![];}function toNight(){const _0x108edb=_0xfe9835;setLog('高原（夜）：写真背景\x20hisyochi1.jpg'),scene['background']=nightBgTex,scene[_0x108edb(0xf3)][_0x108edb(0x168)]=0x0,ground['visible']=![],motes['visible']=![];if(benchObj)benchObj['visible']=![];if(doorPivot)doorPivot['visible']=![];hemi[_0x108edb(0x129)]=0.35,hemi[_0x108edb(0x11b)][_0x108edb(0xc7)](0xa8d3ff),hemi['groundColor'][_0x108edb(0xc7)](0x142026),key[_0x108edb(0x129)]=0.4,key['color']['set'](0xcfe5ff),snow[_0x108edb(0xc4)]=![];}function descentColdNoPhoto(){const _0x2041e5=_0xfe9835;setLog(_0x2041e5(0x11c)),scene[_0x2041e5(0xeb)]=descentBgTex,scene[_0x2041e5(0xf3)][_0x2041e5(0x11b)][_0x2041e5(0xc7)](0xa0f14),scene['fog'][_0x2041e5(0x168)]=0.04,ground[_0x2041e5(0xc4)]=![],motes[_0x2041e5(0xc4)]=![];if(benchObj)benchObj[_0x2041e5(0xc4)]=![];if(doorPivot)doorPivot[_0x2041e5(0xc4)]=![];key[_0x2041e5(0x129)]=0.6,key[_0x2041e5(0x11b)][_0x2041e5(0xc7)](0xbfdcff),hemi[_0x2041e5(0x129)]=0.4,hemi[_0x2041e5(0x11b)]['set'](0x9fb9ff),hemi['groundColor']['set'](0xa0f14);}function returnDoor(){const _0x53194b=_0xfe9835;setLog(_0x53194b(0x123)),scene[_0x53194b(0xeb)]=new THREE[(_0x53194b(0x14e))](0xc0f14),scene[_0x53194b(0xf3)][_0x53194b(0x168)]=0.022,scene[_0x53194b(0xf3)][_0x53194b(0x11b)][_0x53194b(0xc7)](0xc0f14),ground['visible']=!![],motes['visible']=!![];doorPivot&&(doorPivot[_0x53194b(0xc4)]=!![],doorPivot[_0x53194b(0xe6)]['set'](0x0,0x0,0x0));doorObj&&doorObj[_0x53194b(0x114)]&&(doorObj[_0x53194b(0x114)][_0x53194b(0x149)]=new THREE['Color'](0x88aaff),doorObj[_0x53194b(0x114)][_0x53194b(0x143)]=0.6);doorState['opening']=![],doorState[_0x53194b(0x103)]=![];if(benchObj)benchObj[_0x53194b(0xc4)]=![];key['intensity']=0.85,key['color'][_0x53194b(0xc7)](0xe9f3ff),hemi[_0x53194b(0x129)]=0.5,hemi['color']['set'](0xbad3ff),hemi[_0x53194b(0xc1)][_0x53194b(0xc7)](0xc0f14),snow[_0x53194b(0xc4)]=![];}function _0x359e(){const _0x10e8e1=['―\x20戻る道はひとつ。次の夏、扉が開いたとき、現世の者を一人送り込むこと。\x20―\x20入れ替わりは“縁ある者”に限る。','fall','enablePan','preventDefault','material','innerWidth','44256umWtXQ','high-performance','stopPropagation','冷たい扉が現れる','minFilter','color','地獄の寒気：写真（hisyochi2.jpg）＋吹雪','けれど彼女は昨夏、熱中症で突然亡くなった。','PointsMaterial','benchModel','attributes','悪いと分かっていても、罪悪感は次第に薄れていく。\u3000――戻りたい。美奈の真意を確かめたい。誰かを、代わりに。','1795580xzQDiz','一年後：扉は再び開く（写真なし）','count','clientX','そこには、汗だくで路地に迷い込んだ懐かしい姿があった。','load','足元の小川は鏡のように静まり、まるで“境界”のようだ。','intensity','maxDistance','pointerup','arc','params','――END――','createRadialGradient','turb','fill','cancelable','「悠人、先にコンビニ寄って飲み物買ってくるわ。喉が死にそう」','key','Vector3','頭の隙間で、美奈が囁く。「どちらも選べなかったの」','minDistance','time','Points','618NZYOdQ','cos','扉が再び開く','掲示板には古びた紙が何枚も貼られていた。','toneMappingExposure','elapsedTime','lerpVectors','1819657nOFZnn','取り合いの末に失ってしまった存在。僕と亮はまた友人として並ぶようになったが、気まずさは残った。','emissiveIntensity','abs','active','BufferGeometry','scene','geometry','emissive','scrollTo','exposureBase','getContext','茜の名残が薄れる散策路の端、ささくれた木枠の掲示板がこちらを向いていた。','Color','userData','pow','indexOf','enableDamping','encoding','DOOR','length','toFixed','ギィィ','CanvasTexture','HemisphereLight','getDelta','dur','setPixelRatio','8xlpqxY','STREET','BufferAttribute','hisyochi.png','記事には続きがあった。「修理依頼は出されておらず、窓も開けられていなかったという」……それはもう、事故ではなかった。','その日は異常だった。アスファルトは歪み、街路樹の影すら役に立たない。気温は40度を超え、蝉の声さえ狂気じみて聞こえた。','text','outputEncoding','TextureLoader','opening','「わかった。じゃあ本屋の前で集合な」','density','「中学生・佐々木美奈（14）、自宅で死亡。エアコン故障か」','DESCENT','addEventListener','MathUtils','PerspectiveCamera','扉の周りには涼を求める人が集まっていた。皆、吸い寄せられるように近づき、開くのを待っている。','木陰の下には涼やかな風、澄んだ小川がきらめき、岩にあたる水音が心地よい旋律のように響く。','NIGHT','render','PlaneGeometry','classList','心地よさは偽りで、この場所は地獄だった。耐え難い寒さと暗闇に、心は削られていく。','setSize','BoxGeometry','僕の名前は佐藤悠人（さとう・ゆうと）。十五歳の夏、あの日の暑さを、僕は一生忘れられない。','max','width','ArrowRight','ArrowLeft','「主婦・長谷川絹子（42）、帰宅途中に路上で倒れ死亡」','6688099aFCQhD','doorModel','orientationchange','some','5rbMPBD','rgba(255,255,255,0.85)','getElementById','clearRect','clientY','groundColor','windX','FogExp2','visible','composedPath','Mesh','set','array','panel','LinearFilter','灼熱の街：写真のみ（地面/モヤなし）','innerHeight','contains','「涼しい……！」思わず声をあげ、疑念も恐怖も忘れて駆け回る。','GLTFLoader','prevBtn','appendChild','receiveShadow','hemiPeak','random','HIGHLAND','sRGBEncoding','rgba(255,255,255,1)','Scene:\x20','position','setAttribute','sin','resize','3814xdrrcy','exposurePeak','target','min','hisyochi2.png','hemiBase','updateProjectionMatrix','――一年が経った。扉が再び開く。','MeshStandardMaterial','rotation','最後に感じたのは――背中に触れた手の、異様な冷たさだった。','避暑地は次第におかしくなっていく。冷気は鋭く肺を突き、風は骨の芯まで凍みる。陽は沈まず、薄暗さだけが永遠に続く。','pointerdown','.panel','background','rgba(255,255,255,0)','親の顔。妹の笑顔。亮との日々。誰か一人を思い浮かべるたび、心臓を握りつぶされるような苦しみが走る。','keydown','sqrt','3364ARcLIf','Group','〈避暑地案内〉\x20―\x20扉は真夏の極暑の日にだけ開く。訪れた者は涼を得られる。ただし長居は禁物……','fog','109jkGNcE','僕はゆっくりと手を伸ばす。掌に触れる、確かな温もり。','domElement','「会社員・斎藤真司（32）、河川敷で意識失い死亡」','body','add','END','ONEYEAR','addColorStop','enabled','lerp','needsUpdate','HOT','machi.png','includes','opened','beginPath','2458359sRCEkI','vel','size','hisyochi1.png','clone','sceneChip','textContent','now','〈冥府新報・過去記事抜粋〉「高校生・川村明彦（17）、部活動中に倒れ死亡」','log','やがて夕暮れ。時計では数分しか経っていないのに、空は茜色に染まっていた。時間の感覚が狂っている。'];_0x359e=function(){return _0x10e8e1;};return _0x359e();}function fadeToBlack(){const _0x54f15d=_0xfe9835;setLog('終幕'),scene['background']=new THREE[(_0x54f15d(0x14e))](0x0);let _0x45a53a=0x0;(function _0x2eaeb5(){const _0x72c4d=_0x54f15d;_0x45a53a+=0.02,scene['fog'][_0x72c4d(0x168)]=THREE[_0x72c4d(0x16c)][_0x72c4d(0xfe)](scene['fog'][_0x72c4d(0x168)],0.12,0.05);if(_0x45a53a<1.2)requestAnimationFrame(_0x2eaeb5);}());}const doorState={'opening':![],'opened':![]};function openDoor(){const _0xc2a8e5=_0xfe9835;if(!doorPivot||doorState[_0xc2a8e5(0x103)]||doorState[_0xc2a8e5(0x166)])return;doorState[_0xc2a8e5(0x166)]=!![];const _0x4c3259=performance[_0xc2a8e5(0x10c)](),_0x2a29ff=0x320,_0x1dcf2e=0x0,_0x287e0f=-Math['PI']*0x2/0x3;if(doorObj&&doorObj[_0xc2a8e5(0x114)])doorObj[_0xc2a8e5(0x114)][_0xc2a8e5(0x143)]=0.9;function _0x5bde9b(_0x2eeb73){const _0x40822d=_0xc2a8e5,_0x56ba1d=Math[_0x40822d(0xe0)](0x1,(_0x2eeb73-_0x4c3259)/_0x2a29ff),_0x275d84=0x1-Math['pow'](0x1-_0x56ba1d,0x3);doorPivot[_0x40822d(0xe6)]['y']=_0x1dcf2e+(_0x287e0f-_0x1dcf2e)*_0x275d84;if(_0x56ba1d<0x1)requestAnimationFrame(_0x5bde9b);else{doorState['opening']=![],doorState['opened']=!![];if(doorObj&&doorObj[_0x40822d(0x114)])doorObj[_0x40822d(0x114)][_0x40822d(0x143)]=0.6;}}requestAnimationFrame(_0x5bde9b);}function startBlizzard(){const _0x298d20=_0xfe9835;snow['visible']=!![];const _0x37b2f6=snow[_0x298d20(0x14f)][_0x298d20(0x12d)];_0x37b2f6[_0x298d20(0xc2)]=3.2,_0x37b2f6[_0x298d20(0x111)]=0x6,_0x37b2f6[_0x298d20(0x130)]=0x4,snow[_0x298d20(0x114)][_0x298d20(0x107)]=0.14;}let camTween=null;function cameraFly(_0x2be014,_0x5bb766){const _0x38b72b=_0xfe9835,_0x3166ea=camera[_0x38b72b(0xd9)][_0x38b72b(0x109)](),_0x43707b=controls[_0x38b72b(0xdf)]['clone'](),_0x1f1f43=_0x2be014[_0x38b72b(0x109)](),_0x27bc7e=_0x5bb766[_0x38b72b(0x109)](),_0x3eff74=1.2;let _0x41025a=0x0;camTween=function _0x140619(){const _0x45e05c=_0x38b72b,_0xe1e99b=clock[_0x45e05c(0x15a)]();_0x41025a+=_0xe1e99b;const _0x1b482c=Math['min'](0x1,_0x41025a/_0x3eff74),_0xe4a1bd=ease(_0x1b482c);camera[_0x45e05c(0xd9)][_0x45e05c(0x140)](_0x3166ea,_0x1f1f43,_0xe4a1bd),controls[_0x45e05c(0xdf)][_0x45e05c(0x140)](_0x43707b,_0x27bc7e,_0xe4a1bd);if(_0x1b482c<0x1)requestAnimationFrame(camTween);else camTween=null;},requestAnimationFrame(camTween);}function ease(_0x2f8bd1){return _0x2f8bd1<0.5?0x4*_0x2f8bd1*_0x2f8bd1*_0x2f8bd1:0x1-Math['pow'](-0x2*_0x2f8bd1+0x2,0x3)/0x2;}function cameraPunchToDoor(){const _0x92b915=_0xfe9835,_0x3c7124=camera[_0x92b915(0xd9)][_0x92b915(0x109)](),_0x39746d=controls[_0x92b915(0xdf)][_0x92b915(0x109)](),_0xb2f30c=new THREE[(_0x92b915(0x135))](0x0,1.25,-0.6),_0x1ae9f9=new THREE['Vector3'](0x0,1.1,-0x2),_0x30b725=0x226,_0x227fd1=performance[_0x92b915(0x10c)](),_0x4f082c=controls[_0x92b915(0xfd)];controls['enabled']=![];function _0x3e4bb3(){const _0xfa4293=_0x92b915,_0x5079c0=Math[_0xfa4293(0xe0)](0x1,(performance[_0xfa4293(0x10c)]()-_0x227fd1)/_0x30b725),_0x56b75c=0x1-Math[_0xfa4293(0x150)](0x1-_0x5079c0,0x3);camera[_0xfa4293(0xd9)][_0xfa4293(0x140)](_0x3c7124,_0xb2f30c,_0x56b75c),controls[_0xfa4293(0xdf)][_0xfa4293(0x140)](_0x39746d,_0x1ae9f9,_0x56b75c);if(_0x5079c0<0x1)requestAnimationFrame(_0x3e4bb3);else{controls[_0xfa4293(0xfd)]=_0x4f082c;if(doorPivot)doorPivot[_0xfa4293(0xc4)]=![];}}requestAnimationFrame(_0x3e4bb3);}setSceneLabel(),setLine(NARRATIVE[curScene][0x0]),enterEffects(curScene);let lastMeter=0x0;function loop(){const _0x48bf9f=_0xfe9835;requestAnimationFrame(loop);const _0x2eb984=clock[_0x48bf9f(0x15a)](),_0x1a211f=clock[_0x48bf9f(0x13f)];if(lightning[_0x48bf9f(0x145)]){lightning['time']+=_0x2eb984;const _0x2eb81a=Math['min'](lightning[_0x48bf9f(0x138)]/lightning[_0x48bf9f(0x15b)],0x1),_0x466cc5=0x1-_0x2eb81a,_0x212272=_0x466cc5*_0x466cc5*(0x2-_0x466cc5);hemi[_0x48bf9f(0x129)]=lightning[_0x48bf9f(0xe2)]+(lightning[_0x48bf9f(0xd3)]-lightning[_0x48bf9f(0xe2)])*_0x212272,renderer['toneMappingExposure']=lightning[_0x48bf9f(0x14b)]+(lightning[_0x48bf9f(0xde)]-lightning[_0x48bf9f(0x14b)])*_0x212272,_0x2eb81a>=0x1&&(lightning[_0x48bf9f(0x145)]=![],hemi[_0x48bf9f(0x129)]=lightning[_0x48bf9f(0xe2)],renderer[_0x48bf9f(0x13e)]=lightning[_0x48bf9f(0x14b)]);}updateMotes(_0x1a211f),updateSnow(_0x1a211f,_0x2eb984);if(controls[_0x48bf9f(0xfd)])controls['update']();renderer[_0x48bf9f(0x171)](scene,camera);const _0x259cd2=performance['now']();if(_0x259cd2-lastMeter>0x1f4){const _0x19bd29=(0x1/_0x2eb984)[_0x48bf9f(0x156)](0x0);fpsEl[_0x48bf9f(0x10b)]='FPS:\x20'+_0x19bd29,lastMeter=_0x259cd2;}}loop();function updateMotes(_0x555bfc){const _0xf21dc2=_0xfe9835,_0x23b9f8=motes[_0xf21dc2(0x148)]['attributes'][_0xf21dc2(0xd9)];for(let _0x4bc61c=0x0;_0x4bc61c<_0x23b9f8[_0xf21dc2(0x124)];_0x4bc61c++){const _0x5afcb5=_0x4bc61c*0x3,_0xbd9db3=_0x23b9f8[_0xf21dc2(0xc8)][_0x5afcb5],_0x5167b6=_0x23b9f8[_0xf21dc2(0xc8)][_0x5afcb5+0x1],_0x157533=_0x23b9f8[_0xf21dc2(0xc8)][_0x5afcb5+0x2],_0xae1ed8=curScene===SCENES[_0xf21dc2(0x15e)]||curScene===SCENES[_0xf21dc2(0x154)]?'HOT':'COLD',_0x44e90c=_0xae1ed8===_0xf21dc2(0x100)?Math[_0xf21dc2(0xdb)](_0x555bfc*0x2+_0xbd9db3*1.1+_0x157533*0.8)*0.006:Math[_0xf21dc2(0xdb)](_0x555bfc*0.7+_0xbd9db3*0.6+_0x157533*0.5)*0.003;_0x23b9f8[_0xf21dc2(0xc8)][_0x5afcb5+0x1]=_0x5167b6+_0x44e90c;}_0x23b9f8[_0xf21dc2(0xff)]=!![];}function updateSnow(_0xcdfa61,_0x65d46f){const _0x1aeb6e=_0xfe9835;if(!snow['visible'])return;const _0x3eec5c=snow[_0x1aeb6e(0x148)],_0x3b0e50=_0x3eec5c[_0x1aeb6e(0x120)][_0x1aeb6e(0xd9)][_0x1aeb6e(0xc8)],_0x186943=_0x3eec5c['userData']['vel'],_0x4fa6ae=snow['userData']['params'],_0x265b08=0x18;for(let _0x24d658=0x0;_0x24d658<_0x186943[_0x1aeb6e(0x155)]/0x3;_0x24d658++){const _0x3cdbdc=_0x24d658*0x3,_0x42c855=Math[_0x1aeb6e(0xdb)](_0xcdfa61*1.7+_0x3b0e50[_0x3cdbdc+0x2]*0.12+_0x24d658*0.13)*_0x4fa6ae[_0x1aeb6e(0x130)]*0.3,_0x5344e3=Math[_0x1aeb6e(0x13b)](_0xcdfa61*1.3+_0x3b0e50[_0x3cdbdc]*0.11+_0x24d658*0.17)*_0x4fa6ae['turb']*0.25;_0x3b0e50[_0x3cdbdc+0x0]+=(_0x186943[_0x3cdbdc+0x0]+_0x4fa6ae[_0x1aeb6e(0xc2)]*0.6+_0x42c855)*_0x65d46f,_0x3b0e50[_0x3cdbdc+0x1]+=(_0x186943[_0x3cdbdc+0x1]-_0x4fa6ae[_0x1aeb6e(0x111)])*_0x65d46f,_0x3b0e50[_0x3cdbdc+0x2]+=(_0x186943[_0x3cdbdc+0x2]+_0x5344e3)*_0x65d46f;if(_0x3b0e50[_0x3cdbdc+0x1]<-0.5){const _0xf7934d=Math[_0x1aeb6e(0xd4)]()*Math['PI']*0x2,_0x58e20f=Math[_0x1aeb6e(0xef)](Math[_0x1aeb6e(0xd4)]())*_0x265b08;_0x3b0e50[_0x3cdbdc+0x0]=Math[_0x1aeb6e(0x13b)](_0xf7934d)*_0x58e20f,_0x3b0e50[_0x3cdbdc+0x2]=Math[_0x1aeb6e(0xdb)](_0xf7934d)*_0x58e20f,_0x3b0e50[_0x3cdbdc+0x1]=Math['random']()*0x6+0x4,_0x186943[_0x3cdbdc+0x0]=Math[_0x1aeb6e(0xd4)]()*0.2-0.1,_0x186943[_0x3cdbdc+0x1]=-(Math[_0x1aeb6e(0xd4)]()*0.6+0.4),_0x186943[_0x3cdbdc+0x2]=Math[_0x1aeb6e(0xd4)]()*0.2-0.1;}}_0x3eec5c['attributes']['position'][_0x1aeb6e(0xff)]=!![];}function onResize(){const _0x303a57=_0xfe9835,_0x26e23f=innerWidth,_0x12d43e=innerHeight;renderer[_0x303a57(0x175)](_0x26e23f,_0x12d43e),camera['aspect']=_0x26e23f/_0x12d43e,camera[_0x303a57(0xe3)](),window[_0x303a57(0x14a)](0x0,0x0);}window[_0xfe9835(0x16b)](_0xfe9835(0xdc),onResize),window[_0xfe9835(0x16b)](_0xfe9835(0xba),()=>{setTimeout(onResize,0xc8);}),document[_0xfe9835(0x16b)](_0xfe9835(0xee),_0x2a1152=>{const _0x125ecd=_0xfe9835;(_0x2a1152[_0x125ecd(0x134)]===_0x125ecd(0xb5)||_0x2a1152[_0x125ecd(0x134)]==='\x20')&&goNext(),_0x2a1152[_0x125ecd(0x134)]===_0x125ecd(0xb6)&&goPrev();});
</script>
</body>
</html>
